# 搜索日志<a name="aom_02_0009"></a>

当需要通过日志来分析和定位问题时，使用日志搜索功能可帮您快速在海量日志中查询到所需的日志，您还可结合日志的来源信息和上下文原始数据一起辅助定位问题。

1.  在左侧导航栏中选择“日志 \> 日志搜索”。
2.  在“日志搜索”页面中选择日志页签（即组件、系统、主机）并按照界面提示设置日志查询条件。
3.  <a name="li34212241"></a>查看日志搜索结果。

    搜索结果中，关键词会高亮显示，同时会根据日志的采集时间对搜索结果进行排序，以方便您查看。您可单击“时间”列的![](figures/zh-cn_image_0263893535.png)进行切换排序。

    ![](figures/zh-cn_image_0263893464.png)为默认排序，![](figures/zh-cn_image_0263893518.png)为按时间正序排序（即时间最新的日志显示在最后方），![](figures/zh-cn_image_0263893557.png)为时间倒序排序（即时间最新的日志显示在最前方）

    1.  单击日志列表左侧的![](figures/icon-down-arrow-13.png)，可进一步查看该条日志的详细信息。
    2.  AOM支持查看上下文信息，您不用在原始日文文件中上下翻页查找日志，单击“操作”列的“上下文”，即可查看该日志的前若干条（即上文）或后若干条（即下文）的日志，方便您定位问题。
        -   在“上下文显示行数”下拉列表框中，可设置该条日志的上下文原始数据显示行数。

            >![](public_sys-resources/icon-note.gif) **说明：** 
            >例如，设置“上下文显示行数”为“200”。
            >-   若该日志之前已打印的日志条数 ≥100，该日志之后已打印的日志条数 ≥99，则该日志之前的100条和之后的99条日志会被作为上下文显示。
            >-   若该日志之前已打印的日志条数 <100（例如，已打印90条日志），该日志之后已打印的日志条数 <99（例如，已打印80条日志），则该日志之前的90条和之后的80条日志会被作为上下文显示。

        -   单击“导出本页”，可将已显示的日志上下文原始数据导出到本地。

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >为了保障租户主机和组件的正常运行，租户的主机上会运行部分系统提供的组件（例如，kube-dns）。查询租户日志时也会查询到这些组件的日志。

4.  （可选）单击“![](figures/zh-cn_image_0263893498.png)”，选择导出格式，将搜索结果导出到本地。

    导出的日志内容已按[3](#li34212241)中您选择的排序方式进行了排序，且最多导出已排序的前5000条日志。例如，搜索结果中总共有6000条日志，已选择的排序方式是倒序，则只能导出时间最近的前5000条日志。

    支持以CSV格式和TXT格式导出日志，您可根据需求灵活选择。CSV格式可导出日志的内容、主机IP、来源等详细信息（如[图1](#fig17700153315202)所示）。TXT格式只能导出日志的内容（如[图2](#fig74285517415)所示），每行为一条日志，如果单条日志内容较多时建议使用Notepad++编辑器打开。

    **图 1**  以CSV格式导出日志<a name="fig17700153315202"></a>  
    ![](figures/以CSV格式导出日志.png "以CSV格式导出日志")

    **图 2**  以TXT格式导出日志<a name="fig74285517415"></a>  
    ![](figures/以TXT格式导出日志.png "以TXT格式导出日志")


