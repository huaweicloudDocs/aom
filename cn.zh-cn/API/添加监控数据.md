# 添加监控数据<a name="aom_04_0013"></a>

## 功能介绍<a name="zh-cn_topic_0096010429_section66765654"></a>

该接口用于向服务端添加一条或多条监控数据。

## 调试<a name="section3135254124617"></a>

您可以在[API Explorer](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=AOM&api=AddMetricData)中调试该接口。

## URI<a name="zh-cn_topic_0096010429_section64019978"></a>

POST /v1/\{project\_id\}/ams/report/metricdata

参数说明请参见[表1](#zh-cn_topic_0096010429_table369962415599)。

**表 1**  参数说明

<a name="zh-cn_topic_0096010429_table369962415599"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096010429_row21708033"><th class="cellrowborder" valign="top" width="32.65%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096010429_p13520221"><a name="zh-cn_topic_0096010429_p13520221"></a><a name="zh-cn_topic_0096010429_p13520221"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="24.490000000000002%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096010429_p21396142"><a name="zh-cn_topic_0096010429_p21396142"></a><a name="zh-cn_topic_0096010429_p21396142"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="42.86%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096010429_p55365980"><a name="zh-cn_topic_0096010429_p55365980"></a><a name="zh-cn_topic_0096010429_p55365980"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096010429_row55459406"><td class="cellrowborder" valign="top" width="32.65%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p63026925"><a name="zh-cn_topic_0096010429_p63026925"></a><a name="zh-cn_topic_0096010429_p63026925"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="24.490000000000002%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p4907296"><a name="zh-cn_topic_0096010429_p4907296"></a><a name="zh-cn_topic_0096010429_p4907296"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="42.86%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p61946704"><a name="zh-cn_topic_0096010429_p61946704"></a><a name="zh-cn_topic_0096010429_p61946704"></a>租户从IAM申请到的projectid，一般为32位字符串。</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="zh-cn_topic_0096010429_section39308890"></a>

**请求参数**

请求参数如[表3](#zh-cn_topic_0096010429_table539122593914)所示。

**表 2**  请求Body参数

<a name="requestParameter"></a>
<table><thead align="left"><tr id="row166864391617"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p1371212314169"><a name="p1371212314169"></a><a name="p1371212314169"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.2"><p id="p67129311169"><a name="p67129311169"></a><a name="p67129311169"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p1571313171610"><a name="p1571313171610"></a><a name="p1571313171610"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="40%" id="mcps1.2.5.1.4"><p id="p197138381610"><a name="p197138381610"></a><a name="p197138381610"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1968873121610"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p177138351616"><a name="p177138351616"></a><a name="p177138351616"></a>[数组元素]</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.2 "><p id="p17713143101616"><a name="p17713143101616"></a><a name="p17713143101616"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p7714103191611"><a name="p7714103191611"></a><a name="p7714103191611"></a>Array of <a href="#request_MetricDataItem">MetricDataItem</a> objects</p>
</td>
<td class="cellrowborder" valign="top" width="40%" headers="mcps1.2.5.1.4 "><p id="p97141310169"><a name="p97141310169"></a><a name="p97141310169"></a>指标参数信息</p>
</td>
</tr>
</tbody>
</table>

**表 3**  MetricDataItem

<a name="zh-cn_topic_0096010429_table539122593914"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096010429_row30793786"><th class="cellrowborder" valign="top" width="20.202020202020204%" id="mcps1.2.6.1.1"><p id="zh-cn_topic_0096010429_p11268747"><a name="zh-cn_topic_0096010429_p11268747"></a><a name="zh-cn_topic_0096010429_p11268747"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13.13131313131313%" id="mcps1.2.6.1.2"><p id="zh-cn_topic_0096010429_p40353316"><a name="zh-cn_topic_0096010429_p40353316"></a><a name="zh-cn_topic_0096010429_p40353316"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="17.17171717171717%" id="mcps1.2.6.1.3"><p id="zh-cn_topic_0096010429_p47393198"><a name="zh-cn_topic_0096010429_p47393198"></a><a name="zh-cn_topic_0096010429_p47393198"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="24.242424242424242%" id="mcps1.2.6.1.4"><p id="zh-cn_topic_0096010429_p13643857"><a name="zh-cn_topic_0096010429_p13643857"></a><a name="zh-cn_topic_0096010429_p13643857"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="25.252525252525253%" id="mcps1.2.6.1.5"><p id="zh-cn_topic_0096010429_p31410612"><a name="zh-cn_topic_0096010429_p31410612"></a><a name="zh-cn_topic_0096010429_p31410612"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096010429_row61231615"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p60813787"><a name="zh-cn_topic_0096010429_p60813787"></a><a name="zh-cn_topic_0096010429_p60813787"></a>metric</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p26969711"><a name="zh-cn_topic_0096010429_p26969711"></a><a name="zh-cn_topic_0096010429_p26969711"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p1282083032613"><a name="p1282083032613"></a><a name="p1282083032613"></a><a href="#request_MetricItemInfo">MetricItemInfo</a> object</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0096010429_p49314018"><a name="zh-cn_topic_0096010429_p49314018"></a><a name="zh-cn_topic_0096010429_p49314018"></a>请参见<a href="#zh-cn_topic_0096010429_table682420139176">表4</a></p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0096010429_p35012496"><a name="zh-cn_topic_0096010429_p35012496"></a><a name="zh-cn_topic_0096010429_p35012496"></a>指标数据。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row435925419306"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p1236012544308"><a name="zh-cn_topic_0096010429_p1236012544308"></a><a name="zh-cn_topic_0096010429_p1236012544308"></a>values</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p6360054193010"><a name="zh-cn_topic_0096010429_p6360054193010"></a><a name="zh-cn_topic_0096010429_p6360054193010"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p11841530142616"><a name="p11841530142616"></a><a name="p11841530142616"></a>Array of <a href="#request_ValueData">ValueData</a> objects</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0096010429_p123612541306"><a name="zh-cn_topic_0096010429_p123612541306"></a><a name="zh-cn_topic_0096010429_p123612541306"></a>请参见<a href="#zh-cn_topic_0096010429_table15287516161811">表6</a></p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0096010429_p20361165411307"><a name="zh-cn_topic_0096010429_p20361165411307"></a><a name="zh-cn_topic_0096010429_p20361165411307"></a>指标数据的值。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row11829013110"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p19859143"><a name="zh-cn_topic_0096010429_p19859143"></a><a name="zh-cn_topic_0096010429_p19859143"></a>collect_time</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p65086735"><a name="zh-cn_topic_0096010429_p65086735"></a><a name="zh-cn_topic_0096010429_p65086735"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p03301012714"><a name="p03301012714"></a><a name="p03301012714"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0096010429_p20368048"><a name="zh-cn_topic_0096010429_p20368048"></a><a name="zh-cn_topic_0096010429_p20368048"></a>UNIX时间戳，单位毫秒。数据收集时间支持过去1天和未来半小时范围内的数据上报。</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p56634251102"><a name="p56634251102"></a><a name="p56634251102"></a>数据收集时间需要满足：</p>
<p id="p112467351603"><a name="p112467351603"></a><a name="p112467351603"></a>当前UTC时间减去collect_time小于等于24小时或者collect_time减去当前UTC时间小于等于30分钟。</p>
<p id="zh-cn_topic_0096010429_p133579266497"><a name="zh-cn_topic_0096010429_p133579266497"></a><a name="zh-cn_topic_0096010429_p133579266497"></a>若数据上报时间早于当天8点，则指标监控页面只显示当天8点后的数据。</p>
</td>
</tr>
</tbody>
</table>

**表 4**  metric数据结构说明

<a name="zh-cn_topic_0096010429_table682420139176"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096010429_row98251713111711"><th class="cellrowborder" valign="top" width="20.1%" id="mcps1.2.6.1.1"><p id="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p15958447"><a name="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p15958447"></a><a name="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p15958447"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="15.36%" id="mcps1.2.6.1.2"><p id="zh-cn_topic_0096010429_p454854111197"><a name="zh-cn_topic_0096010429_p454854111197"></a><a name="zh-cn_topic_0096010429_p454854111197"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="18.08%" id="mcps1.2.6.1.3"><p id="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p17565813"><a name="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p17565813"></a><a name="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p17565813"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="17.95%" id="mcps1.2.6.1.4"><p id="zh-cn_topic_0096010429_p6165115951919"><a name="zh-cn_topic_0096010429_p6165115951919"></a><a name="zh-cn_topic_0096010429_p6165115951919"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="28.51%" id="mcps1.2.6.1.5"><p id="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p13544785"><a name="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p13544785"></a><a name="zh-cn_topic_0096010429_zh-cn_topic_0082628669_p13544785"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096010429_row128261313121718"><td class="cellrowborder" valign="top" width="20.1%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p882681316176"><a name="zh-cn_topic_0096010429_p882681316176"></a><a name="zh-cn_topic_0096010429_p882681316176"></a>namespace</p>
</td>
<td class="cellrowborder" valign="top" width="15.36%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p14507142017206"><a name="zh-cn_topic_0096010429_p14507142017206"></a><a name="zh-cn_topic_0096010429_p14507142017206"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="18.08%" headers="mcps1.2.6.1.3 "><p id="p1168117912276"><a name="p1168117912276"></a><a name="p1168117912276"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="17.95%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0096010429_p45082204202"><a name="zh-cn_topic_0096010429_p45082204202"></a><a name="zh-cn_topic_0096010429_p45082204202"></a>格式为service.item；service和item必须是字符串，必须以字母开头，只能包含0-9/a-z/A-Z/_，总长度最短为3，最大为32，service不能以“PAAS”和“SYS”开头。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0096010429_p550892015206"><a name="zh-cn_topic_0096010429_p550892015206"></a><a name="zh-cn_topic_0096010429_p550892015206"></a>指标命名空间。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row28269130174"><td class="cellrowborder" valign="top" width="20.1%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p2845101302715"><a name="zh-cn_topic_0096010429_p2845101302715"></a><a name="zh-cn_topic_0096010429_p2845101302715"></a>dimensions</p>
</td>
<td class="cellrowborder" valign="top" width="15.36%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p1484515131277"><a name="zh-cn_topic_0096010429_p1484515131277"></a><a name="zh-cn_topic_0096010429_p1484515131277"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="18.08%" headers="mcps1.2.6.1.3 "><p id="p11780015162715"><a name="p11780015162715"></a><a name="p11780015162715"></a>Array of <a href="#request_Dimension">Dimension</a> objects</p>
</td>
<td class="cellrowborder" valign="top" width="17.95%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0096010429_p208451313122720"><a name="zh-cn_topic_0096010429_p208451313122720"></a><a name="zh-cn_topic_0096010429_p208451313122720"></a>单个维度为json对象，结构说明如下</p>
<p id="zh-cn_topic_0096010429_p1884521315275"><a name="zh-cn_topic_0096010429_p1884521315275"></a><a name="zh-cn_topic_0096010429_p1884521315275"></a>dimension.name：长度最短为1，最大为32。满足[a-zA-Z_][a-zA-Z0-9_]*格式，且不能为_NAMESPACE_。</p>
<p id="zh-cn_topic_0096010429_p28451913162717"><a name="zh-cn_topic_0096010429_p28451913162717"></a><a name="zh-cn_topic_0096010429_p28451913162717"></a>dimension.value：长度最短为1，最大为64。</p>
</td>
<td class="cellrowborder" valign="top" width="28.51%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0096010429_p28461313152715"><a name="zh-cn_topic_0096010429_p28461313152715"></a><a name="zh-cn_topic_0096010429_p28461313152715"></a>指标维度列表。</p>
</td>
</tr>
</tbody>
</table>

**表 5**  Dimension

<a name="request_Dimension"></a>
<table><thead align="left"><tr id="row1191232811243"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.1"><p id="p99139287246"><a name="p99139287246"></a><a name="p99139287246"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.2"><p id="p1913202820245"><a name="p1913202820245"></a><a name="p1913202820245"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.5.1.3"><p id="p4913122882410"><a name="p4913122882410"></a><a name="p4913122882410"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="40%" id="mcps1.2.5.1.4"><p id="p9914182882410"><a name="p9914182882410"></a><a name="p9914182882410"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1691272818249"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p149141628112415"><a name="p149141628112415"></a><a name="p149141628112415"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.2 "><p id="p3914112818245"><a name="p3914112818245"></a><a name="p3914112818245"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p16914152862417"><a name="p16914152862417"></a><a name="p16914152862417"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="40%" headers="mcps1.2.5.1.4 "><p id="p1191410288248"><a name="p1191410288248"></a><a name="p1191410288248"></a>名称。</p>
</td>
</tr>
<tr id="row16912122852412"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.1 "><p id="p1491518281249"><a name="p1491518281249"></a><a name="p1491518281249"></a>value</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.2 "><p id="p9915112814241"><a name="p9915112814241"></a><a name="p9915112814241"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.5.1.3 "><p id="p1891552815249"><a name="p1891552815249"></a><a name="p1891552815249"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="40%" headers="mcps1.2.5.1.4 "><p id="p19915182814249"><a name="p19915182814249"></a><a name="p19915182814249"></a>指标数据的值。</p>
</td>
</tr>
</tbody>
</table>

**表 6**  values数据结构说明

<a name="zh-cn_topic_0096010429_table15287516161811"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096010429_row528815164183"><th class="cellrowborder" valign="top" width="18.238176182381757%" id="mcps1.2.6.1.1"><p id="zh-cn_topic_0096010429_p82881416121817"><a name="zh-cn_topic_0096010429_p82881416121817"></a><a name="zh-cn_topic_0096010429_p82881416121817"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="8.86911308869113%" id="mcps1.2.6.1.2"><p id="zh-cn_topic_0096010429_p162861977298"><a name="zh-cn_topic_0096010429_p162861977298"></a><a name="zh-cn_topic_0096010429_p162861977298"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="8.979102089791018%" id="mcps1.2.6.1.3"><p id="zh-cn_topic_0096010429_p328815161185"><a name="zh-cn_topic_0096010429_p328815161185"></a><a name="zh-cn_topic_0096010429_p328815161185"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="35.40645935406459%" id="mcps1.2.6.1.4"><p id="zh-cn_topic_0096010429_p129951023112919"><a name="zh-cn_topic_0096010429_p129951023112919"></a><a name="zh-cn_topic_0096010429_p129951023112919"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="28.50714928507149%" id="mcps1.2.6.1.5"><p id="zh-cn_topic_0096010429_p3288131617182"><a name="zh-cn_topic_0096010429_p3288131617182"></a><a name="zh-cn_topic_0096010429_p3288131617182"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096010429_row132882166183"><td class="cellrowborder" valign="top" width="18.238176182381757%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p142881116111811"><a name="zh-cn_topic_0096010429_p142881116111811"></a><a name="zh-cn_topic_0096010429_p142881116111811"></a>unit</p>
</td>
<td class="cellrowborder" valign="top" width="8.86911308869113%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p174134510291"><a name="zh-cn_topic_0096010429_p174134510291"></a><a name="zh-cn_topic_0096010429_p174134510291"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="8.979102089791018%" headers="mcps1.2.6.1.3 "><p id="p9604724192716"><a name="p9604724192716"></a><a name="p9604724192716"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="35.40645935406459%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0096010429_p174154517298"><a name="zh-cn_topic_0096010429_p174154517298"></a><a name="zh-cn_topic_0096010429_p174154517298"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="28.50714928507149%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0096010429_p14124552920"><a name="zh-cn_topic_0096010429_p14124552920"></a><a name="zh-cn_topic_0096010429_p14124552920"></a>数据的单位。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row1328801613188"><td class="cellrowborder" valign="top" width="18.238176182381757%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p1928815166187"><a name="zh-cn_topic_0096010429_p1928815166187"></a><a name="zh-cn_topic_0096010429_p1928815166187"></a>metric_name</p>
</td>
<td class="cellrowborder" valign="top" width="8.86911308869113%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p5660125319294"><a name="zh-cn_topic_0096010429_p5660125319294"></a><a name="zh-cn_topic_0096010429_p5660125319294"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="8.979102089791018%" headers="mcps1.2.6.1.3 "><p id="p1761992402711"><a name="p1761992402711"></a><a name="p1761992402711"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="35.40645935406459%" headers="mcps1.2.6.1.4 "><p id="p1815825894017"><a name="p1815825894017"></a><a name="p1815825894017"></a>取值满足表达式[a-zA-Z_:][a-zA-Z0-9_:]*，即指标名称首字符必须为字母或_或:，其他字符由字母数字_:组成，长度为1~255个字符。</p>
</td>
<td class="cellrowborder" valign="top" width="28.50714928507149%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0096010429_p14661753202919"><a name="zh-cn_topic_0096010429_p14661753202919"></a><a name="zh-cn_topic_0096010429_p14661753202919"></a>指标名称。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row52881516141817"><td class="cellrowborder" valign="top" width="18.238176182381757%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p3289316161811"><a name="zh-cn_topic_0096010429_p3289316161811"></a><a name="zh-cn_topic_0096010429_p3289316161811"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="8.86911308869113%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p655615223010"><a name="zh-cn_topic_0096010429_p655615223010"></a><a name="zh-cn_topic_0096010429_p655615223010"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="8.979102089791018%" headers="mcps1.2.6.1.3 "><p id="p36351624162716"><a name="p36351624162716"></a><a name="p36351624162716"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="35.40645935406459%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0096010429_p12556223301"><a name="zh-cn_topic_0096010429_p12556223301"></a><a name="zh-cn_topic_0096010429_p12556223301"></a>只能是"int"或"float"。</p>
</td>
<td class="cellrowborder" valign="top" width="28.50714928507149%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0096010429_p85567223011"><a name="zh-cn_topic_0096010429_p85567223011"></a><a name="zh-cn_topic_0096010429_p85567223011"></a>数据的类型。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row82890167185"><td class="cellrowborder" valign="top" width="18.238176182381757%" headers="mcps1.2.6.1.1 "><p id="zh-cn_topic_0096010429_p52894162182"><a name="zh-cn_topic_0096010429_p52894162182"></a><a name="zh-cn_topic_0096010429_p52894162182"></a>value</p>
</td>
<td class="cellrowborder" valign="top" width="8.86911308869113%" headers="mcps1.2.6.1.2 "><p id="zh-cn_topic_0096010429_p15824181616307"><a name="zh-cn_topic_0096010429_p15824181616307"></a><a name="zh-cn_topic_0096010429_p15824181616307"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="8.979102089791018%" headers="mcps1.2.6.1.3 "><p id="p1873655162811"><a name="p1873655162811"></a><a name="p1873655162811"></a>Double</p>
</td>
<td class="cellrowborder" valign="top" width="35.40645935406459%" headers="mcps1.2.6.1.4 "><p id="zh-cn_topic_0096010429_p68241416133015"><a name="zh-cn_topic_0096010429_p68241416133015"></a><a name="zh-cn_topic_0096010429_p68241416133015"></a>有效的数值类型</p>
</td>
<td class="cellrowborder" valign="top" width="28.50714928507149%" headers="mcps1.2.6.1.5 "><p id="zh-cn_topic_0096010429_p13824016173017"><a name="zh-cn_topic_0096010429_p13824016173017"></a><a name="zh-cn_topic_0096010429_p13824016173017"></a>指标数据的值。</p>
</td>
</tr>
</tbody>
</table>

**Header说明**

请求消息头（Header）如[表7](#zh-cn_topic_0096010429_table17428844137)所示。

**表 7**  Header说明

<a name="zh-cn_topic_0096010429_table17428844137"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096010429_row1542824171318"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096010429_p18428241134"><a name="zh-cn_topic_0096010429_p18428241134"></a><a name="zh-cn_topic_0096010429_p18428241134"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096010429_p1142819412139"><a name="zh-cn_topic_0096010429_p1142819412139"></a><a name="zh-cn_topic_0096010429_p1142819412139"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096010429_p1742816441311"><a name="zh-cn_topic_0096010429_p1742816441311"></a><a name="zh-cn_topic_0096010429_p1742816441311"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096010429_row1942834191319"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p166451516193818"><a name="zh-cn_topic_0096010429_p166451516193818"></a><a name="zh-cn_topic_0096010429_p166451516193818"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p464591643812"><a name="zh-cn_topic_0096010429_p464591643812"></a><a name="zh-cn_topic_0096010429_p464591643812"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p156451416173813"><a name="zh-cn_topic_0096010429_p156451416173813"></a><a name="zh-cn_topic_0096010429_p156451416173813"></a>从IAM服务获取的用户Token。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row2428124181313"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p464641619384"><a name="zh-cn_topic_0096010429_p464641619384"></a><a name="zh-cn_topic_0096010429_p464641619384"></a>Content-Type</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p464631663813"><a name="zh-cn_topic_0096010429_p464631663813"></a><a name="zh-cn_topic_0096010429_p464631663813"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p1464691683810"><a name="zh-cn_topic_0096010429_p1464691683810"></a><a name="zh-cn_topic_0096010429_p1464691683810"></a>指定类型为application/json。</p>
</td>
</tr>
</tbody>
</table>

**请求示例**

```
[ 
    { 
        "metric": { 
            "namespace": "NOPAAS.ESC", 
            "dimensions": [ 
                { 
                    "name": "instance_id", 
                    "value": "instance-101" 
                } 
            ] 
        }, 
        "values": [ 
            { 
                "unit": "percent", 
                "metric_name": "cpu_util", 
                "type": "int", 
                "value": 35 
            } 
        ], 
        "collect_time": 1467787152000 
    } 
]
```

**java**样例代码****

```
package com.huawei.monitor.metricsvc.cloudmiddleware;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import com.huawei.bsp.log.OssLog;
import com.huawei.bsp.log.OssLogFactory;
import com.huawei.monitor.metricsvc.auth.QuerySvcTokenUtil;
import com.cloud.sdk.auth.signer.Signer;
import com.cloud.sdk.auth.signer.SignerFactory;
import com.cloud.sdk.http.HttpMethodName;
import com.cloud.sdk.DefaultRequest;
import com.cloud.sdk.Request;
import com.cloud.sdk.auth.credentials.BasicCredentials;
import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import javax.net.ssl.SSLContext;
import org.apache.commons.lang.StringUtils;
import org.apache.http.Header;
import org.apache.http.HttpHeaders;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.conn.ssl.AllowAllHostnameVerifier;
import org.apache.http.conn.ssl.SSLConnectionSocketFactory;
import org.apache.http.conn.ssl.SSLContexts;
import org.apache.http.conn.ssl.TrustSelfSignedStrategy;
import org.apache.http.entity.InputStreamEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;

public class ReportMetricdata
{
    // 日志类
    private static final OssLog LOG = OssLogFactory.getLog(ReportMetricdata.class);

    private static CloseableHttpClient client = null;

    private static final String HTTPS_PREFIX = "https://";

    private static String serviceName = "aom";

    //区域ID
    private static String region = "regionid";

    // AK的值
    private static String ak = "ZIRRKMTWP******1WKNKB";

    // SK的值
    private static String sk = "Us0mdMNHk******YrRCnW0ecfzl";

    // 添加监控数据接口uri
    private static final String AMS_REPORT_METRIC_DATA_URL = "/v1/{project_id}/ams/report/metricdata";

    // AOM服务的Endpoint，不同区域Endpoint不同，建议配置在环境变量中
    private static String aom_endpoint = "aom.regionid.myhuaweicloud.com";

    /**
     * AOM Report Metric Data Method
     *
     * @param projectId
     *            工程ID
     * @param sendData
     *            要发送的数据
     */
    public static void reportMetricDataToAMS(String projectId, String sendData)
    {
        try
        {
            if (StringUtils.isBlank(projectId))
            {
                LOG.warn("project_id is empty.");
                return;
            }
            if (StringUtils.isBlank(aom_endpoint))
            {
                LOG.warn("aom_endpoint is blank");
                return;
            }
            String endpointUrl = HTTPS_PREFIX + aom_endpoint + AMS_REPORT_METRIC_DATA_URL;
            endpointUrl = endpointUrl.replaceAll("\\{project_id\\}", projectId);// https://aom.regionid.myhuaweicloud.com/v1/{project_id}/ams/report/metricdata
            URL url = null;
            try
            {
                url = new URL(endpointUrl);
            }
            catch (MalformedURLException e)
            {
                e.printStackTrace();
            }
            // 请求Header,必填
            Map<String, String> header = new HashMap<String, String>();
            header.put("content-Type", "application/json");
            // header.put("X-Auth-Token", QuerySvcTokenUtil.getToken());
            InputStream content = new ByteArrayInputStream(sendData.getBytes());
            // POST请求
            HttpResponse rsp = access(url, header, content, (long) sendData.getBytes().length, HttpMethodName.POST);
            if (rsp.getEntity() != null && rsp.getEntity().getContent() != null)
            {
                // 返回值 {"errorCode":
                // "SVCSTG.AMS.2000","errorMessage":"success"}代表成功。
                LOG.warn("report metricdata success :{}", rsp);
            }
        }
        catch (Throwable e)
        {
            LOG.error("Exception in ReportMetricdataToAMS", e);
        }
    }

    private static HttpResponse access(URL url, Map<String, String> headers, InputStream content, Long contentLength, HttpMethodName httpMethod)
            throws Exception
    {
        Request request = new DefaultRequest("aom");
        request.setEndpoint(url.toURI());
        request.setHttpMethod(httpMethod);
        if (headers != null)
        {
            request.setHeaders(headers);
        }
        request.setContent(content);
        Signer signer = SignerFactory.getSigner(serviceName, region);
        //用户的AK/SK
        signer.sign(request, new BasicCredentials(ak, sk));
        HttpRequestBase httpRequestBase = createRequest(url, null, request.getContent(), contentLength, httpMethod);
        Map<String, String> requestHeaders = request.getHeaders();
        for (String key : requestHeaders.keySet())
        {
            if (key.equalsIgnoreCase(HttpHeaders.CONTENT_LENGTH.toString()))
            {
                continue;
            }
            httpRequestBase.addHeader(key, requestHeaders.get(key));
        }
        HttpResponse response = null;
        // SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null,
        // new TrustSelfSignedStrategy()).useTLS().build();
        SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, new TrustSelfSignedStrategy()
        {
            @Override
            public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException
            {
                return true;
            }
        }).useTLS().build();
        SSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(sslContext, new AllowAllHostnameVerifier());
        client = HttpClients.custom().setSSLSocketFactory(sslSocketFactory).build();
        response = client.execute(httpRequestBase);
        return response;
    }

    private static HttpRequestBase createRequest(URL url, Header header, InputStream content, Long contentLength, HttpMethodName httpMethod)
    {
        HttpRequestBase httpRequest;
        if (httpMethod == HttpMethodName.POST)
        {
            HttpPost postMethod = new HttpPost(url.toString());
            if (content != null)
            {
                InputStreamEntity entity = new InputStreamEntity(content, contentLength);
                postMethod.setEntity(entity);
            }
            httpRequest = postMethod;
        }
        else
        {
            throw new RuntimeException("Unknown HTTP method name: " + httpMethod);
        }
        httpRequest.addHeader(header);
        return httpRequest;
    }

    public static void main(String[] args)
    {
        // 原始数据
        String projectId = "projectid00045678912345678912345";// 租户从IAM申请到的projectid，一般为32位字符串
        String namespace = "NOPAAS.ESC";// 指标命名空间。格式为service.item；service和item必须是字符串，必须以字母开头，只能包含0-9/a-z/A-Z/_，总长度最短为3，最大为32，service不能以“PAAS”和“SYS”开头。
        String dimensionName = "instance_id";// 维度名称。长度最短为1，最大为32。
        String instanceid = "instance-101";// 维度名称对应的值。长度最短为1，最大为64。
        String unit = "percent";// 单位
        String metricName = "cpu_util";// 指标名称
        String type = "int";// 数据的类型。只能是"int"或"float"。
        double value = 35;// 指标数据的值。要求为有效的数值类型。
        long collectTime = 1467787152000L;// UNIX时间戳，单位毫秒。

        // 转换为所需格式
        JSONArray request = new JSONArray();
        JSONObject requestObj = new JSONObject();
        // metric部分
        JSONObject metricObj = new JSONObject();
        metricObj.put("namespace", namespace);
        ArrayList<Object> dimensions = new ArrayList<>();
        JSONObject dimension = new JSONObject();
        dimension.put("name", dimensionName);
        dimension.put("value", instanceid);
        dimensions.add(dimension);
        metricObj.put("dimensions", dimensions);
        // values部分
        ArrayList<Object> values = new ArrayList<>();
        JSONObject valueObj = new JSONObject();
        valueObj.put("unit", unit);
        valueObj.put("metric_name", metricName);
        valueObj.put("type", type);
        valueObj.put("value", value);
        values.add(valueObj);

        requestObj.put("metric", metricObj);
        requestObj.put("values", values);
        requestObj.put("collect_time", collectTime);
        request.add(requestObj);
        reportMetricDataToAMS(projectId, request.toString());
    }
}
```

## 响应消息<a name="zh-cn_topic_0096010429_section18235697"></a>

**响应参数**

响应参数如[表8](#zh-cn_topic_0096010429_table03641013479)所示。

**表 8**  响应参数

<a name="zh-cn_topic_0096010429_table03641013479"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096010429_row40195198"><th class="cellrowborder" valign="top" width="29.592959295929592%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096010429_p34585577"><a name="zh-cn_topic_0096010429_p34585577"></a><a name="zh-cn_topic_0096010429_p34585577"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="36.733673367336735%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096010429_p49968357"><a name="zh-cn_topic_0096010429_p49968357"></a><a name="zh-cn_topic_0096010429_p49968357"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.673367336733676%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096010429_p20905113"><a name="zh-cn_topic_0096010429_p20905113"></a><a name="zh-cn_topic_0096010429_p20905113"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096010429_row15592622"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p55042892"><a name="zh-cn_topic_0096010429_p55042892"></a><a name="zh-cn_topic_0096010429_p55042892"></a>errorCode</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p17923125632812"><a name="p17923125632812"></a><a name="p17923125632812"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p23618368"><a name="zh-cn_topic_0096010429_p23618368"></a><a name="zh-cn_topic_0096010429_p23618368"></a>响应码。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row11238724"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p37921442"><a name="zh-cn_topic_0096010429_p37921442"></a><a name="zh-cn_topic_0096010429_p37921442"></a>errorMessage</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p12947156192812"><a name="p12947156192812"></a><a name="p12947156192812"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p30025612"><a name="zh-cn_topic_0096010429_p30025612"></a><a name="zh-cn_topic_0096010429_p30025612"></a>响应信息描述。</p>
</td>
</tr>
</tbody>
</table>

**响应示例**

```
{ 
    "errorCode": "SVCSTG.AMS.2000", 
    "errorMessage": "success" 
}
```

## 状态码<a name="zh-cn_topic_0096010429_section29903551"></a>

-   正常

    状态码如[表9](#zh-cn_topic_0096010429_table86491459125016)所示。

    **表 9**  状态码

    <a name="zh-cn_topic_0096010429_table86491459125016"></a>
    <table><thead align="left"><tr id="zh-cn_topic_0096010429_row58979846"><th class="cellrowborder" valign="top" width="15%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096010429_p12638194"><a name="zh-cn_topic_0096010429_p12638194"></a><a name="zh-cn_topic_0096010429_p12638194"></a>状态码</p>
    </th>
    <th class="cellrowborder" valign="top" width="15%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096010429_p18261589486"><a name="zh-cn_topic_0096010429_p18261589486"></a><a name="zh-cn_topic_0096010429_p18261589486"></a>编码</p>
    </th>
    <th class="cellrowborder" valign="top" width="70%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096010429_p17060819"><a name="zh-cn_topic_0096010429_p17060819"></a><a name="zh-cn_topic_0096010429_p17060819"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="zh-cn_topic_0096010429_row39749137"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p65563539"><a name="zh-cn_topic_0096010429_p65563539"></a><a name="zh-cn_topic_0096010429_p65563539"></a>200</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p115208125323"><a name="zh-cn_topic_0096010429_p115208125323"></a><a name="zh-cn_topic_0096010429_p115208125323"></a>OK</p>
    </td>
    <td class="cellrowborder" valign="top" width="70%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p19579466497"><a name="zh-cn_topic_0096010429_p19579466497"></a><a name="zh-cn_topic_0096010429_p19579466497"></a>请求响应成功。</p>
    </td>
    </tr>
    </tbody>
    </table>


-   异常

    状态码如[表10](#zh-cn_topic_0096010429_table939134985614)所示。更多状态码请见[状态码](状态码.md)。

    **表 10**  状态码

    <a name="zh-cn_topic_0096010429_table939134985614"></a>
    <table><thead align="left"><tr id="zh-cn_topic_0096010429_row44141239"><th class="cellrowborder" valign="top" width="15%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096010429_p18670586"><a name="zh-cn_topic_0096010429_p18670586"></a><a name="zh-cn_topic_0096010429_p18670586"></a>状态码</p>
    </th>
    <th class="cellrowborder" valign="top" width="15%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096010429_p47075245288"><a name="zh-cn_topic_0096010429_p47075245288"></a><a name="zh-cn_topic_0096010429_p47075245288"></a>编码</p>
    </th>
    <th class="cellrowborder" valign="top" width="70%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096010429_p35922469"><a name="zh-cn_topic_0096010429_p35922469"></a><a name="zh-cn_topic_0096010429_p35922469"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="zh-cn_topic_0096010429_row24038881"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p992341"><a name="zh-cn_topic_0096010429_p992341"></a><a name="zh-cn_topic_0096010429_p992341"></a>400</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p126271018112520"><a name="zh-cn_topic_0096010429_p126271018112520"></a><a name="zh-cn_topic_0096010429_p126271018112520"></a>BadRequest</p>
    </td>
    <td class="cellrowborder" valign="top" width="70%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p2431727192515"><a name="zh-cn_topic_0096010429_p2431727192515"></a><a name="zh-cn_topic_0096010429_p2431727192515"></a>非法请求。</p>
    <p id="zh-cn_topic_0096010429_p34352717254"><a name="zh-cn_topic_0096010429_p34352717254"></a><a name="zh-cn_topic_0096010429_p34352717254"></a>建议直接修改该请求，不要重试该请求。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0096010429_row52328576"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p10756297"><a name="zh-cn_topic_0096010429_p10756297"></a><a name="zh-cn_topic_0096010429_p10756297"></a>401</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p195759466253"><a name="zh-cn_topic_0096010429_p195759466253"></a><a name="zh-cn_topic_0096010429_p195759466253"></a>Unauthorized</p>
    </td>
    <td class="cellrowborder" valign="top" width="70%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p1371123810254"><a name="zh-cn_topic_0096010429_p1371123810254"></a><a name="zh-cn_topic_0096010429_p1371123810254"></a>在客户端提供认证信息后，返回该状态码，表明服务端指出客户端所提供的认证信息不正确或非法。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0096010429_row56712700"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p30325987"><a name="zh-cn_topic_0096010429_p30325987"></a><a name="zh-cn_topic_0096010429_p30325987"></a>403</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p15185125614254"><a name="zh-cn_topic_0096010429_p15185125614254"></a><a name="zh-cn_topic_0096010429_p15185125614254"></a>Forbidden</p>
    </td>
    <td class="cellrowborder" valign="top" width="70%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p10447844263"><a name="zh-cn_topic_0096010429_p10447844263"></a><a name="zh-cn_topic_0096010429_p10447844263"></a>请求被拒绝访问。</p>
    <p id="zh-cn_topic_0096010429_p20447941267"><a name="zh-cn_topic_0096010429_p20447941267"></a><a name="zh-cn_topic_0096010429_p20447941267"></a>返回该状态码，表明请求能够到达服务端，且服务端能够理解用户请求，但是拒绝做更多的事情，因为该请求被设置为拒绝访问，建议直接修改该请求，不要重试该请求。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0096010429_row28828553"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p53411432"><a name="zh-cn_topic_0096010429_p53411432"></a><a name="zh-cn_topic_0096010429_p53411432"></a>500</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p2945812153211"><a name="zh-cn_topic_0096010429_p2945812153211"></a><a name="zh-cn_topic_0096010429_p2945812153211"></a>InternalServerError</p>
    </td>
    <td class="cellrowborder" valign="top" width="70%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p1815584516269"><a name="zh-cn_topic_0096010429_p1815584516269"></a><a name="zh-cn_topic_0096010429_p1815584516269"></a>表明服务端能被请求访问到，但是不能理解用户的请求。</p>
    </td>
    </tr>
    <tr id="zh-cn_topic_0096010429_row13793060"><td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p43496037"><a name="zh-cn_topic_0096010429_p43496037"></a><a name="zh-cn_topic_0096010429_p43496037"></a>503</p>
    </td>
    <td class="cellrowborder" valign="top" width="15%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p205675500263"><a name="zh-cn_topic_0096010429_p205675500263"></a><a name="zh-cn_topic_0096010429_p205675500263"></a>ServiceUnavailable</p>
    </td>
    <td class="cellrowborder" valign="top" width="70%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p4668115672614"><a name="zh-cn_topic_0096010429_p4668115672614"></a><a name="zh-cn_topic_0096010429_p4668115672614"></a>被请求的服务无效。</p>
    <p id="zh-cn_topic_0096010429_p14669256182611"><a name="zh-cn_topic_0096010429_p14669256182611"></a><a name="zh-cn_topic_0096010429_p14669256182611"></a>建议直接修改该请求，不要重试该请求。</p>
    </td>
    </tr>
    </tbody>
    </table>


## 错误码<a name="zh-cn_topic_0096010429_section180881121217"></a>

**表 11**  错误码

<a name="zh-cn_topic_0096010429_table4880211161220"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096010429_row58767117124"><th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096010429_p1287611131219"><a name="zh-cn_topic_0096010429_p1287611131219"></a><a name="zh-cn_topic_0096010429_p1287611131219"></a>错误码</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096010429_p14876141115124"><a name="zh-cn_topic_0096010429_p14876141115124"></a><a name="zh-cn_topic_0096010429_p14876141115124"></a>错误信息</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096010429_p1687631110123"><a name="zh-cn_topic_0096010429_p1687631110123"></a><a name="zh-cn_topic_0096010429_p1687631110123"></a>处理措施</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096010429_row148771811151216"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p087618117126"><a name="zh-cn_topic_0096010429_p087618117126"></a><a name="zh-cn_topic_0096010429_p087618117126"></a>SVCSTG_AMS_4000001</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p5888134143415"><a name="zh-cn_topic_0096010429_p5888134143415"></a><a name="zh-cn_topic_0096010429_p5888134143415"></a>Invalid request parameter.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p11876151161211"><a name="zh-cn_topic_0096010429_p11876151161211"></a><a name="zh-cn_topic_0096010429_p11876151161211"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row12878711151219"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p12878151151217"><a name="zh-cn_topic_0096010429_p12878151151217"></a><a name="zh-cn_topic_0096010429_p12878151151217"></a>SVCSTG_AMS_4000002</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p18888124117343"><a name="zh-cn_topic_0096010429_p18888124117343"></a><a name="zh-cn_topic_0096010429_p18888124117343"></a>Invalid namespace.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p1587810111126"><a name="zh-cn_topic_0096010429_p1587810111126"></a><a name="zh-cn_topic_0096010429_p1587810111126"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row1787811111214"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p48782011121215"><a name="zh-cn_topic_0096010429_p48782011121215"></a><a name="zh-cn_topic_0096010429_p48782011121215"></a>SVCSTG_AMS_4000003</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p168891241133413"><a name="zh-cn_topic_0096010429_p168891241133413"></a><a name="zh-cn_topic_0096010429_p168891241133413"></a>Dimensions are left blank.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p15878411161210"><a name="zh-cn_topic_0096010429_p15878411161210"></a><a name="zh-cn_topic_0096010429_p15878411161210"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row1987812113121"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p1387818115127"><a name="zh-cn_topic_0096010429_p1387818115127"></a><a name="zh-cn_topic_0096010429_p1387818115127"></a>SVCSTG_AMS_4000005</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p158891041113416"><a name="zh-cn_topic_0096010429_p158891041113416"></a><a name="zh-cn_topic_0096010429_p158891041113416"></a>Invalid metric data type.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p14878181141217"><a name="zh-cn_topic_0096010429_p14878181141217"></a><a name="zh-cn_topic_0096010429_p14878181141217"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row1187971116125"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p487812113120"><a name="zh-cn_topic_0096010429_p487812113120"></a><a name="zh-cn_topic_0096010429_p487812113120"></a>SVCSTG_AMS_4000006</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p2088910413344"><a name="zh-cn_topic_0096010429_p2088910413344"></a><a name="zh-cn_topic_0096010429_p2088910413344"></a>The metric data value is left blank.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p18879151181218"><a name="zh-cn_topic_0096010429_p18879151181218"></a><a name="zh-cn_topic_0096010429_p18879151181218"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row16879181115128"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p118794116128"><a name="zh-cn_topic_0096010429_p118794116128"></a><a name="zh-cn_topic_0096010429_p118794116128"></a>SVCSTG_AMS_4000007</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p1488994111343"><a name="zh-cn_topic_0096010429_p1488994111343"></a><a name="zh-cn_topic_0096010429_p1488994111343"></a>Invalid name or value length in the dimension.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p19879111114127"><a name="zh-cn_topic_0096010429_p19879111114127"></a><a name="zh-cn_topic_0096010429_p19879111114127"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row128792110126"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p1087961117129"><a name="zh-cn_topic_0096010429_p1087961117129"></a><a name="zh-cn_topic_0096010429_p1087961117129"></a>SVCSTG_AMS_4000008</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p11889184110346"><a name="zh-cn_topic_0096010429_p11889184110346"></a><a name="zh-cn_topic_0096010429_p11889184110346"></a>The request exceeds 40 KB.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p68791611151214"><a name="zh-cn_topic_0096010429_p68791611151214"></a><a name="zh-cn_topic_0096010429_p68791611151214"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row887931191214"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p587941131214"><a name="zh-cn_topic_0096010429_p587941131214"></a><a name="zh-cn_topic_0096010429_p587941131214"></a>SVCSTG_AMS_4000009</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p11889134153416"><a name="zh-cn_topic_0096010429_p11889134153416"></a><a name="zh-cn_topic_0096010429_p11889134153416"></a>A metric supports a maximum of 20 dimensions.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p1879161161212"><a name="zh-cn_topic_0096010429_p1879161161212"></a><a name="zh-cn_topic_0096010429_p1879161161212"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row1687961171220"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p158798112127"><a name="zh-cn_topic_0096010429_p158798112127"></a><a name="zh-cn_topic_0096010429_p158798112127"></a>SVCSTG_AMS_4000010</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p688974173410"><a name="zh-cn_topic_0096010429_p688974173410"></a><a name="zh-cn_topic_0096010429_p688974173410"></a>Invalid collection time.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p6879131181220"><a name="zh-cn_topic_0096010429_p6879131181220"></a><a name="zh-cn_topic_0096010429_p6879131181220"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096010429_row16880411161212"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096010429_p98801411181217"><a name="zh-cn_topic_0096010429_p98801411181217"></a><a name="zh-cn_topic_0096010429_p98801411181217"></a>SVCSTG_AMS_5000000</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096010429_p15889104117342"><a name="zh-cn_topic_0096010429_p15889104117342"></a><a name="zh-cn_topic_0096010429_p15889104117342"></a>Internal server error.</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096010429_p1888051131215"><a name="zh-cn_topic_0096010429_p1888051131215"></a><a name="zh-cn_topic_0096010429_p1888051131215"></a>请联系管理员解决。</p>
</td>
</tr>
</tbody>
</table>

