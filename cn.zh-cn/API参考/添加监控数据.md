# 添加监控数据<a name="ZH-CN_TOPIC_0096010429"></a>

## 功能介绍<a name="section66765654"></a>

该接口用于向服务端添加一条或多条监控数据。

## URI<a name="section64019978"></a>

POST /v1/\{project\_id\}/ams/report/metricdata

参数说明请参见[表1](#table369962415599)。

**表 1**  参数说明

<a name="table369962415599"></a>
<table><thead align="left"><tr id="row21708033"><th class="cellrowborder" valign="top" width="32.65%" id="mcps1.2.4.1.1"><p id="p13520221"><a name="p13520221"></a><a name="p13520221"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="24.490000000000002%" id="mcps1.2.4.1.2"><p id="p21396142"><a name="p21396142"></a><a name="p21396142"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="42.86%" id="mcps1.2.4.1.3"><p id="p55365980"><a name="p55365980"></a><a name="p55365980"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row55459406"><td class="cellrowborder" valign="top" width="32.65%" headers="mcps1.2.4.1.1 "><p id="p63026925"><a name="p63026925"></a><a name="p63026925"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="24.490000000000002%" headers="mcps1.2.4.1.2 "><p id="p4907296"><a name="p4907296"></a><a name="p4907296"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="42.86%" headers="mcps1.2.4.1.3 "><p id="p61946704"><a name="p61946704"></a><a name="p61946704"></a>租户从IAM申请到的projectid，一般为32位字符串；运维侧调用可选om或manage——其中om表示运维侧命名空间，manage表示租户侧命名空间。</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="section39308890"></a>

**请求参数**

请求参数如[表2](#table539122593914)所示。

**表 2**  请求参数

<a name="table539122593914"></a>
<table><thead align="left"><tr id="row30793786"><th class="cellrowborder" valign="top" width="20.202020202020204%" id="mcps1.2.6.1.1"><p id="p11268747"><a name="p11268747"></a><a name="p11268747"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13.13131313131313%" id="mcps1.2.6.1.2"><p id="p40353316"><a name="p40353316"></a><a name="p40353316"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="17.17171717171717%" id="mcps1.2.6.1.3"><p id="p47393198"><a name="p47393198"></a><a name="p47393198"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="24.242424242424242%" id="mcps1.2.6.1.4"><p id="p13643857"><a name="p13643857"></a><a name="p13643857"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="25.252525252525253%" id="mcps1.2.6.1.5"><p id="p31410612"><a name="p31410612"></a><a name="p31410612"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row61231615"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="p60813787"><a name="p60813787"></a><a name="p60813787"></a>metric</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="p26969711"><a name="p26969711"></a><a name="p26969711"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p37063012"><a name="p37063012"></a><a name="p37063012"></a>JSON对象</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="p49314018"><a name="p49314018"></a><a name="p49314018"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p35012496"><a name="p35012496"></a><a name="p35012496"></a>指标数据。</p>
</td>
</tr>
<tr id="row46677008"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="p22741322"><a name="p22741322"></a><a name="p22741322"></a>namespace</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="p30107784"><a name="p30107784"></a><a name="p30107784"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p22811443"><a name="p22811443"></a><a name="p22811443"></a>字符串</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="p35787570"><a name="p35787570"></a><a name="p35787570"></a>格式为service.item；service和item必须是字符串，必须以字母开头，只能包含0-9/a-z/A-Z/_，总长度最短为3，最大为32，service不能为“PAAS”。</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p13112046"><a name="p13112046"></a><a name="p13112046"></a>指标命名空间。</p>
</td>
</tr>
<tr id="row50899550"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="p29222847"><a name="p29222847"></a><a name="p29222847"></a>metric_name</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="p18240401"><a name="p18240401"></a><a name="p18240401"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p1077499"><a name="p1077499"></a><a name="p1077499"></a>字符串</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="p20168614"><a name="p20168614"></a><a name="p20168614"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p23045050"><a name="p23045050"></a><a name="p23045050"></a>指标名称。</p>
</td>
</tr>
<tr id="row6078858"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="p22625485"><a name="p22625485"></a><a name="p22625485"></a>dimensions</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="p20725005"><a name="p20725005"></a><a name="p20725005"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p1003825"><a name="p1003825"></a><a name="p1003825"></a>JSON数组</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="p14200994"><a name="p14200994"></a><a name="p14200994"></a>单个维度为json对象，结构说明如下</p>
<p id="p60700082"><a name="p60700082"></a><a name="p60700082"></a>dimension.name：长度最短为1，最大为32。</p>
<p id="p9429831"><a name="p9429831"></a><a name="p9429831"></a>dimension.value：长度最短为1，最大为64。</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p25618824"><a name="p25618824"></a><a name="p25618824"></a>指标维度列表。</p>
</td>
</tr>
<tr id="row29242831"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="p19859143"><a name="p19859143"></a><a name="p19859143"></a>collect_time</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="p65086735"><a name="p65086735"></a><a name="p65086735"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p37534159"><a name="p37534159"></a><a name="p37534159"></a>UNIX时间戳</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="p20368048"><a name="p20368048"></a><a name="p20368048"></a>UNIX时间戳，单位毫秒。</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p39199193"><a name="p39199193"></a><a name="p39199193"></a>数据收集时间支持过去1天和未来半小时范围内的数据上报</p>
</td>
</tr>
<tr id="row17248425"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="p54945170"><a name="p54945170"></a><a name="p54945170"></a>value</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="p21373784"><a name="p21373784"></a><a name="p21373784"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p53554914"><a name="p53554914"></a><a name="p53554914"></a>数值类型</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="p42980760"><a name="p42980760"></a><a name="p42980760"></a>有效的数值类型</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p58889572"><a name="p58889572"></a><a name="p58889572"></a>指标数据的值。</p>
</td>
</tr>
<tr id="row60244100"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="p47933961"><a name="p47933961"></a><a name="p47933961"></a>unit</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="p57445655"><a name="p57445655"></a><a name="p57445655"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p22586453"><a name="p22586453"></a><a name="p22586453"></a>字符串</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="p17563371"><a name="p17563371"></a><a name="p17563371"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p13346946"><a name="p13346946"></a><a name="p13346946"></a>数据的单位。</p>
</td>
</tr>
<tr id="row53013653"><td class="cellrowborder" valign="top" width="20.202020202020204%" headers="mcps1.2.6.1.1 "><p id="p66247504"><a name="p66247504"></a><a name="p66247504"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="13.13131313131313%" headers="mcps1.2.6.1.2 "><p id="p64447583"><a name="p64447583"></a><a name="p64447583"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.17171717171717%" headers="mcps1.2.6.1.3 "><p id="p52871723"><a name="p52871723"></a><a name="p52871723"></a>字符串</p>
</td>
<td class="cellrowborder" valign="top" width="24.242424242424242%" headers="mcps1.2.6.1.4 "><p id="p54751131"><a name="p54751131"></a><a name="p54751131"></a>只能是"int"或"float"。</p>
</td>
<td class="cellrowborder" valign="top" width="25.252525252525253%" headers="mcps1.2.6.1.5 "><p id="p5656599"><a name="p5656599"></a><a name="p5656599"></a>数据的类型。</p>
</td>
</tr>
</tbody>
</table>

**Header说明**

请求消息头（Header）如[表3](#table17428844137)所示。

**表 3**  Header说明

<a name="table17428844137"></a>
<table><thead align="left"><tr id="row1542824171318"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p18428241134"><a name="p18428241134"></a><a name="p18428241134"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p1142819412139"><a name="p1142819412139"></a><a name="p1142819412139"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p1742816441311"><a name="p1742816441311"></a><a name="p1742816441311"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1942834191319"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p166451516193818"><a name="p166451516193818"></a><a name="p166451516193818"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p464591643812"><a name="p464591643812"></a><a name="p464591643812"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p156451416173813"><a name="p156451416173813"></a><a name="p156451416173813"></a>从IAM服务获取的用户Token。</p>
</td>
</tr>
<tr id="row2428124181313"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p464641619384"><a name="p464641619384"></a><a name="p464641619384"></a>Content-Type</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p464631663813"><a name="p464631663813"></a><a name="p464631663813"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p1464691683810"><a name="p1464691683810"></a><a name="p1464691683810"></a>指定类型为application/json。</p>
</td>
</tr>
</tbody>
</table>

**请求示例**

```
[ 
    { 
        "metric": { 
            "namespace": "NOPAAS.ESC", 
            "dimensions": [ 
                { 
                    "name": "instance_id", 
                    "value": "instance-101" 
                } 
            ] 
        }, 
        "values": [ 
            { 
                "unit": "percent", 
                "metric_name": "cpu_util", 
                "type": "int", 
                "value": 35 
            } 
        ], 
        "collect_time": 1467787152000 
    } 
]
```

**java**样例代码****

```
package com.huawei.monitor.metricsvc.cloudmiddleware;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import com.huawei.bsp.log.OssLog;
import com.huawei.bsp.log.OssLogFactory;
import com.huawei.monitor.metricsvc.auth.QuerySvcTokenUtil;
import com.cloud.sdk.auth.signer.Signer;
import com.cloud.sdk.auth.signer.SignerFactory;
import com.cloud.sdk.http.HttpMethodName;
import com.cloud.sdk.DefaultRequest;
import com.cloud.sdk.Request;
import com.cloud.sdk.auth.credentials.BasicCredentials;
import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import javax.net.ssl.SSLContext;
import org.apache.commons.lang.StringUtils;
import org.apache.http.Header;
import org.apache.http.HttpHeaders;
import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.conn.ssl.AllowAllHostnameVerifier;
import org.apache.http.conn.ssl.SSLConnectionSocketFactory;
import org.apache.http.conn.ssl.SSLContexts;
import org.apache.http.conn.ssl.TrustSelfSignedStrategy;
import org.apache.http.entity.InputStreamEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;

public class ReportMetricdata
{
    // 日志类
    private static final OssLog LOG = OssLogFactory.getLog(ReportMetricdata.class);

    private static CloseableHttpClient client = null;

    private static final String HTTPS_PREFIX = "https://";

    private static String serviceName = "aom";

    //区域ID
    private static String region = "regionid";

    // AK的值
    private static String ak = "ZIRRKMTWP******1WKNKB";

    // SK的值
    private static String sk = "Us0mdMNHk******YrRCnW0ecfzl";

    // 添加监控数据接口uri
    private static final String AMS_REPORT_METRIC_DATA_URL = "/v1/{project_id}/ams/report/metricdata";

    // AOM服务的Endpoint，不同区域Endpoint不同，建议配置在环境变量中
    private static String aom_endpoint = "aom.regionid.myhuaweicloud.com";

    /**
     * AOM Report Metric Data Method
     *
     * @param projectId
     *            工程ID
     * @param sendData
     *            要发送的数据
     */
    public static void reportMetricDataToAMS(String projectId, String sendData)
    {
        try
        {
            if (StringUtils.isBlank(projectId))
            {
                LOG.warn("project_id is empty.");
                return;
            }
            if (StringUtils.isBlank(aom_endpoint))
            {
                LOG.warn("aom_endpoint is blank");
                return;
            }
            String endpointUrl = HTTPS_PREFIX + aom_endpoint + AMS_REPORT_METRIC_DATA_URL;
            endpointUrl = endpointUrl.replaceAll("\\{project_id\\}", projectId);// https://aom.regionid.myhuaweicloud.com/v1/{project_id}/ams/report/metricdata
            URL url = null;
            try
            {
                url = new URL(endpointUrl);
            }
            catch (MalformedURLException e)
            {
                e.printStackTrace();
            }
            // 请求Header,必填
            Map<String, String> header = new HashMap<String, String>();
            header.put("content-Type", "application/json");
            // header.put("X-Auth-Token", QuerySvcTokenUtil.getToken());
            InputStream content = new ByteArrayInputStream(sendData.getBytes());
            // POST请求
            HttpResponse rsp = access(url, header, content, (long) sendData.getBytes().length, HttpMethodName.POST);
            if (rsp.getEntity() != null && rsp.getEntity().getContent() != null)
            {
                // 返回值 {"errorCode":
                // "SVCSTG.AMS.2000","errorMessage":"success"}代表成功。
                LOG.warn("report metricdata success :{}", rsp);
            }
        }
        catch (Throwable e)
        {
            LOG.error("Exception in ReportMetricdataToAMS", e);
        }
    }

    private static HttpResponse access(URL url, Map<String, String> headers, InputStream content, Long contentLength, HttpMethodName httpMethod)
            throws Exception
    {
        Request request = new DefaultRequest("aom");
        request.setEndpoint(url.toURI());
        request.setHttpMethod(httpMethod);
        if (headers != null)
        {
            request.setHeaders(headers);
        }
        request.setContent(content);
        Signer signer = SignerFactory.getSigner(serviceName, region);
        //用户的AK/SK
        signer.sign(request, new BasicCredentials(ak, sk));
        HttpRequestBase httpRequestBase = createRequest(url, null, request.getContent(), contentLength, httpMethod);
        Map<String, String> requestHeaders = request.getHeaders();
        for (String key : requestHeaders.keySet())
        {
            if (key.equalsIgnoreCase(HttpHeaders.CONTENT_LENGTH.toString()))
            {
                continue;
            }
            httpRequestBase.addHeader(key, requestHeaders.get(key));
        }
        HttpResponse response = null;
        // SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null,
        // new TrustSelfSignedStrategy()).useTLS().build();
        SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, new TrustSelfSignedStrategy()
        {
            @Override
            public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException
            {
                return true;
            }
        }).useTLS().build();
        SSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(sslContext, new AllowAllHostnameVerifier());
        client = HttpClients.custom().setSSLSocketFactory(sslSocketFactory).build();
        response = client.execute(httpRequestBase);
        return response;
    }

    private static HttpRequestBase createRequest(URL url, Header header, InputStream content, Long contentLength, HttpMethodName httpMethod)
    {
        HttpRequestBase httpRequest;
        if (httpMethod == HttpMethodName.POST)
        {
            HttpPost postMethod = new HttpPost(url.toString());
            if (content != null)
            {
                InputStreamEntity entity = new InputStreamEntity(content, contentLength);
                postMethod.setEntity(entity);
            }
            httpRequest = postMethod;
        }
        else
        {
            throw new RuntimeException("Unknown HTTP method name: " + httpMethod);
        }
        httpRequest.addHeader(header);
        return httpRequest;
    }

    public static void main(String[] args)
    {
        // 原始数据
        String projectId = "projectid00045678912345678912345";// 租户从IAM申请到的projectid，一般为32位字符串
        String namespace = "NOPAAS.ESC";// 指标命名空间。格式为service.item；service和item必须是字符串，必须以字母开头，只能包含0-9/a-z/A-Z/_，总长度最短为3，最大为32，service不能为“PAAS”。
        String dimensionName = "instance_id";// 维度名称。长度最短为1，最大为32。
        String instanceid = "instance-101";// 维度名称对应的值。长度最短为1，最大为64。
        String unit = "percent";// 单位
        String metricName = "cpu_util";// 指标名称
        String type = "int";// 数据的类型。只能是"int"或"float"。
        int value = 35;// 指标数据的值。要求为有效的数值类型。
        long collectTime = 1467787152000L;// UNIX时间戳，单位毫秒。

        // 转换为所需格式
        JSONArray request = new JSONArray();
        JSONObject requestObj = new JSONObject();
        // metric部分
        JSONObject metricObj = new JSONObject();
        metricObj.put("namespace", namespace);
        ArrayList<Object> dimensions = new ArrayList<>();
        JSONObject dimension = new JSONObject();
        dimension.put("name", dimensionName);
        dimension.put("value", instanceid);
        dimensions.add(dimension);
        metricObj.put("dimensions", dimensions);
        // values部分
        ArrayList<Object> values = new ArrayList<>();
        JSONObject valueObj = new JSONObject();
        valueObj.put("unit", unit);
        valueObj.put("metric_name", metricName);
        valueObj.put("type", type);
        valueObj.put("value", value);
        values.add(valueObj);

        requestObj.put("metric", metricObj);
        requestObj.put("values", values);
        requestObj.put("collect_time", collectTime);
        request.add(requestObj);
        reportMetricDataToAMS(projectId, request.toString());
    }
}
```

## 响应消息<a name="section18235697"></a>

**响应参数**

响应参数如[表4](#table03641013479)所示。

**表 4**  响应参数

<a name="table03641013479"></a>
<table><thead align="left"><tr id="row40195198"><th class="cellrowborder" valign="top" width="29.592959295929592%" id="mcps1.2.4.1.1"><p id="p34585577"><a name="p34585577"></a><a name="p34585577"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="36.733673367336735%" id="mcps1.2.4.1.2"><p id="p49968357"><a name="p49968357"></a><a name="p49968357"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.673367336733676%" id="mcps1.2.4.1.3"><p id="p20905113"><a name="p20905113"></a><a name="p20905113"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row15592622"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p55042892"><a name="p55042892"></a><a name="p55042892"></a>errorCode</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p29289242"><a name="p29289242"></a><a name="p29289242"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p23618368"><a name="p23618368"></a><a name="p23618368"></a>响应码。</p>
</td>
</tr>
<tr id="row11238724"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p37921442"><a name="p37921442"></a><a name="p37921442"></a>errorMessage</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p51737965"><a name="p51737965"></a><a name="p51737965"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p30025612"><a name="p30025612"></a><a name="p30025612"></a>响应信息描述。</p>
</td>
</tr>
</tbody>
</table>

**响应示例**

```
{ 
    "errorCode": "SVCSTG.AMS.2000", 
    "errorMessage": "success" 
}
```

## 状态码<a name="section29903551"></a>

-   正常

    状态码如[表5](#table1702112495910)所示。


**表 5**  状态码

<a name="table1702112495910"></a>
<table><thead align="left"><tr id="row59779777"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p10323750"><a name="p10323750"></a><a name="p10323750"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p30917436"><a name="p30917436"></a><a name="p30917436"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row21284394"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p46314393"><a name="p46314393"></a><a name="p46314393"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p60478385"><a name="p60478385"></a><a name="p60478385"></a>正常</p>
</td>
</tr>
</tbody>
</table>

-   异常

    状态码如[表6](#table137022244593)所示。更多状态码请见[状态码](状态码.md)


**表 6**  状态码

<a name="table137022244593"></a>
<table><thead align="left"><tr id="row5773420"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p64993874"><a name="p64993874"></a><a name="p64993874"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p30012412"><a name="p30012412"></a><a name="p30012412"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row15086290"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p14030014"><a name="p14030014"></a><a name="p14030014"></a>400 Bad Request</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p62689317"><a name="p62689317"></a><a name="p62689317"></a>请求错误。</p>
</td>
</tr>
<tr id="row27332947"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p66485121"><a name="p66485121"></a><a name="p66485121"></a>401 Unauthorized</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p16585695"><a name="p16585695"></a><a name="p16585695"></a>未提供认证信息，或认证信息错。</p>
</td>
</tr>
<tr id="row15053527"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p11376193"><a name="p11376193"></a><a name="p11376193"></a>403 Forbidden</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p49056431"><a name="p49056431"></a><a name="p49056431"></a>请求页面被禁止访问。</p>
</td>
</tr>
<tr id="row38854699"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p60222939"><a name="p60222939"></a><a name="p60222939"></a>500 Internal Server Error</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p46219908"><a name="p46219908"></a><a name="p46219908"></a>请求未完成，服务异常。</p>
</td>
</tr>
<tr id="row13325989"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p5663285"><a name="p5663285"></a><a name="p5663285"></a>503 Service Unavailable</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p56072913"><a name="p56072913"></a><a name="p56072913"></a>系统暂时不可用，请求受限。</p>
</td>
</tr>
</tbody>
</table>

## 错误码<a name="section180881121217"></a>

**表 7**  错误码

<a name="table4880211161220"></a>
<table><thead align="left"><tr id="row58767117124"><th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.1"><p id="p1287611131219"><a name="p1287611131219"></a><a name="p1287611131219"></a>错误码</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.2"><p id="p14876141115124"><a name="p14876141115124"></a><a name="p14876141115124"></a>错误信息</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.3"><p id="p1687631110123"><a name="p1687631110123"></a><a name="p1687631110123"></a>处理措施</p>
</th>
</tr>
</thead>
<tbody><tr id="row148771811151216"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p087618117126"><a name="p087618117126"></a><a name="p087618117126"></a>SVCSTG_AMS_4000001</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p1087681118121"><a name="p1087681118121"></a><a name="p1087681118121"></a>Request param invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p11876151161211"><a name="p11876151161211"></a><a name="p11876151161211"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row12878711151219"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p12878151151217"><a name="p12878151151217"></a><a name="p12878151151217"></a>SVCSTG_AMS_4000002</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p387841131218"><a name="p387841131218"></a><a name="p387841131218"></a>Namespace format invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p1587810111126"><a name="p1587810111126"></a><a name="p1587810111126"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row1787811111214"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p48782011121215"><a name="p48782011121215"></a><a name="p48782011121215"></a>SVCSTG_AMS_4000003</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p19878161113125"><a name="p19878161113125"></a><a name="p19878161113125"></a>Dimensions is empty</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p15878411161210"><a name="p15878411161210"></a><a name="p15878411161210"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row1987812113121"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p1387818115127"><a name="p1387818115127"></a><a name="p1387818115127"></a>SVCSTG_AMS_4000005</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p11878211101216"><a name="p11878211101216"></a><a name="p11878211101216"></a>Add Metric data type is invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p14878181141217"><a name="p14878181141217"></a><a name="p14878181141217"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row1187971116125"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p487812113120"><a name="p487812113120"></a><a name="p487812113120"></a>SVCSTG_AMS_4000006</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p3878131113124"><a name="p3878131113124"></a><a name="p3878131113124"></a>Add Metric data values is empty</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p18879151181218"><a name="p18879151181218"></a><a name="p18879151181218"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row16879181115128"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p118794116128"><a name="p118794116128"></a><a name="p118794116128"></a>SVCSTG_AMS_4000007</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p1987951116122"><a name="p1987951116122"></a><a name="p1987951116122"></a>Name or value length in dimension is invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p19879111114127"><a name="p19879111114127"></a><a name="p19879111114127"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row128792110126"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p1087961117129"><a name="p1087961117129"></a><a name="p1087961117129"></a>SVCSTG_AMS_4000008</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p11879191115125"><a name="p11879191115125"></a><a name="p11879191115125"></a>Request content length exceeds 40KB</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p68791611151214"><a name="p68791611151214"></a><a name="p68791611151214"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row887931191214"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p587941131214"><a name="p587941131214"></a><a name="p587941131214"></a>SVCSTG_AMS_4000009</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p1487919111122"><a name="p1487919111122"></a><a name="p1487919111122"></a>Dimension size per metric exceeds 20</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p1879161161212"><a name="p1879161161212"></a><a name="p1879161161212"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row1687961171220"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p158798112127"><a name="p158798112127"></a><a name="p158798112127"></a>SVCSTG_AMS_4000010</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p19879811161210"><a name="p19879811161210"></a><a name="p19879811161210"></a>Collect time is invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p6879131181220"><a name="p6879131181220"></a><a name="p6879131181220"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row16880411161212"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p98801411181217"><a name="p98801411181217"></a><a name="p98801411181217"></a>SVCSTG_AMS_5000000</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p1788071118126"><a name="p1788071118126"></a><a name="p1788071118126"></a>Internal server error</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p1888051131215"><a name="p1888051131215"></a><a name="p1888051131215"></a>请联系管理员解决。</p>
</td>
</tr>
</tbody>
</table>

