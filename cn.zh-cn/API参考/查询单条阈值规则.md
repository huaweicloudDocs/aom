# 查询单条阈值规则<a name="ZH-CN_TOPIC_0096010432"></a>

## 功能介绍<a name="section51399305"></a>

该接口用于查询单条阈值规则。

## URI<a name="section59940568"></a>

GET /v1/\{project\_id\}/ams/alarms/\{alarm\_id\}

## 请求消息<a name="section2594204"></a>

**请求参数**

请求参数如[表1](#d0e3305)所示。

**表 1**  请求参数

<a name="d0e3305"></a>
<table><thead align="left"><tr id="row19042640"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p66058841"><a name="p66058841"></a><a name="p66058841"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13%" id="mcps1.2.6.1.2"><p id="p49165866"><a name="p49165866"></a><a name="p49165866"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="18%" id="mcps1.2.6.1.3"><p id="p23012204"><a name="p23012204"></a><a name="p23012204"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="26%" id="mcps1.2.6.1.4"><p id="p52049222"><a name="p52049222"></a><a name="p52049222"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="23%" id="mcps1.2.6.1.5"><p id="p55237473"><a name="p55237473"></a><a name="p55237473"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row45050341"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p25198968"><a name="p25198968"></a><a name="p25198968"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.6.1.2 "><p id="p27850565"><a name="p27850565"></a><a name="p27850565"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.6.1.3 "><p id="p41303282"><a name="p41303282"></a><a name="p41303282"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="26%" headers="mcps1.2.6.1.4 "><p id="p57231527"><a name="p57231527"></a><a name="p57231527"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.6.1.5 "><p id="p5242125"><a name="p5242125"></a><a name="p5242125"></a>租户从IAM申请到的projectid，一般为32位字符串；运维侧调用可选om或manage——其中om表示运维侧命名空间，manage表示租户侧命名空间。</p>
</td>
</tr>
<tr id="row47179130"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p63413163"><a name="p63413163"></a><a name="p63413163"></a>alarm_id</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.6.1.2 "><p id="p36192610"><a name="p36192610"></a><a name="p36192610"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.6.1.3 "><p id="p45920260"><a name="p45920260"></a><a name="p45920260"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="26%" headers="mcps1.2.6.1.4 "><p id="p28553595"><a name="p28553595"></a><a name="p28553595"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.6.1.5 "><p id="p31139887"><a name="p31139887"></a><a name="p31139887"></a>阈值规则ID</p>
</td>
</tr>
</tbody>
</table>

**Header说明**

请求消息头（Header）如[表2](#table17428844137)所示。

**表 2**  Header说明

<a name="table17428844137"></a>
<table><thead align="left"><tr id="row1542824171318"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p18428241134"><a name="p18428241134"></a><a name="p18428241134"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p1142819412139"><a name="p1142819412139"></a><a name="p1142819412139"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p1742816441311"><a name="p1742816441311"></a><a name="p1742816441311"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1942834191319"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p166451516193818"><a name="p166451516193818"></a><a name="p166451516193818"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p464591643812"><a name="p464591643812"></a><a name="p464591643812"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p156451416173813"><a name="p156451416173813"></a><a name="p156451416173813"></a>从IAM服务获取的用户Token。</p>
</td>
</tr>
<tr id="row2428124181313"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p464641619384"><a name="p464641619384"></a><a name="p464641619384"></a>Content-Type</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p464631663813"><a name="p464631663813"></a><a name="p464631663813"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p1464691683810"><a name="p1464691683810"></a><a name="p1464691683810"></a>指定类型为application/json。</p>
</td>
</tr>
</tbody>
</table>

## 响应消息<a name="section23347838"></a>

**响应参数**

响应参数如[表3](#d0e3376)所示。

**表 3**  响应参数

<a name="d0e3376"></a>
<table><thead align="left"><tr id="row3122427"><th class="cellrowborder" valign="top" width="29.592959295929592%" id="mcps1.2.4.1.1"><p id="p51590031"><a name="p51590031"></a><a name="p51590031"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="36.733673367336735%" id="mcps1.2.4.1.2"><p id="p18043012"><a name="p18043012"></a><a name="p18043012"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.673367336733676%" id="mcps1.2.4.1.3"><p id="p52197890"><a name="p52197890"></a><a name="p52197890"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row170672"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p13824438"><a name="p13824438"></a><a name="p13824438"></a>errorCode</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p46037693"><a name="p46037693"></a><a name="p46037693"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p38065644"><a name="p38065644"></a><a name="p38065644"></a>响应码。</p>
</td>
</tr>
<tr id="row7046483"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p33894226"><a name="p33894226"></a><a name="p33894226"></a>errorMessage</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p61077774"><a name="p61077774"></a><a name="p61077774"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p48352622"><a name="p48352622"></a><a name="p48352622"></a>响应信息描述。</p>
</td>
</tr>
<tr id="row32520415"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p16907953"><a name="p16907953"></a><a name="p16907953"></a>thresholds</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p27366939"><a name="p27366939"></a><a name="p27366939"></a>JSON数组</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p2129606"><a name="p2129606"></a><a name="p2129606"></a>阈值规则列表。</p>
</td>
</tr>
</tbody>
</table>

**响应示例**

```
{ 
    "errorCode": "SVCSTG.AMS.2000", 
    "errorMessage": "success", 
    "thresholds":  
    [ 
    { 
        "id": "2137", 
        "alarmName": "aaaaaaaa", 
        "alarmDescription": "", 
        "actionEnabled": false, 
        "okActions": [], 
        "alarmActions": [], 
        "insufficientDataActions": [], 
        "stateValue": "alarm", 
        "stateReason": "", 
        "stateUpdatedTimestamp": null, 
        "metricName": "cpuCoreLimit", 
        "namespace": "PAAS.CONTAINER", 
        "statistic": "average", 
        "dimensions": [ 
            { 
                "name": "appName", 
                "value": "rhm-broker" 
            } 
        ], 
        "period": 60000, 
        "evaluationPeriods": 1, 
        "unit": "Core", 
        "threshold": "0", 
        "comparisonOperator": ">=", 
        "alarmAdvice": "", 
        "alarmLevel": 3 
    } 
    ] 
}
```

## 状态码<a name="section8803951"></a>

-   正常

    状态码如[表4](#d0e3441)所示。


**表 4**  状态码

<a name="d0e3441"></a>
<table><thead align="left"><tr id="row24057013"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p2461040"><a name="p2461040"></a><a name="p2461040"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p65126527"><a name="p65126527"></a><a name="p65126527"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row40757323"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p13008827"><a name="p13008827"></a><a name="p13008827"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p47082039"><a name="p47082039"></a><a name="p47082039"></a>查询警报成功</p>
</td>
</tr>
</tbody>
</table>

-   异常

    状态码如[表5](#d0e3470)所示。更多状态码请见[状态码](状态码.md)


**表 5**  状态码

<a name="d0e3470"></a>
<table><thead align="left"><tr id="row56617839"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p22642236"><a name="p22642236"></a><a name="p22642236"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p22081809"><a name="p22081809"></a><a name="p22081809"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row43796119"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p57824757"><a name="p57824757"></a><a name="p57824757"></a>400 Bad Request</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p53293780"><a name="p53293780"></a><a name="p53293780"></a>请求错误。</p>
</td>
</tr>
<tr id="row9881980"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p62242878"><a name="p62242878"></a><a name="p62242878"></a>401 Unauthorized</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p8508373"><a name="p8508373"></a><a name="p8508373"></a>未提供认证信息，或认证信息错。</p>
</td>
</tr>
<tr id="row9466500"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p28589045"><a name="p28589045"></a><a name="p28589045"></a>403 Forbidden</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p34011310"><a name="p34011310"></a><a name="p34011310"></a>请求页面被禁止访问。</p>
</td>
</tr>
<tr id="row37666342"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p31074847"><a name="p31074847"></a><a name="p31074847"></a>500 Internal Server Error</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p34034677"><a name="p34034677"></a><a name="p34034677"></a>请求未完成，服务异常。</p>
</td>
</tr>
<tr id="row37876638"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p48108809"><a name="p48108809"></a><a name="p48108809"></a>503 Service Unavailable</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p4499461"><a name="p4499461"></a><a name="p4499461"></a>系统暂时不可用，请求受限。</p>
</td>
</tr>
</tbody>
</table>

## 错误码<a name="section180881121217"></a>

**表 6**  错误码

<a name="table4880211161220"></a>
<table><thead align="left"><tr id="row58767117124"><th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.1"><p id="p1287611131219"><a name="p1287611131219"></a><a name="p1287611131219"></a>错误码</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.2"><p id="p14876141115124"><a name="p14876141115124"></a><a name="p14876141115124"></a>错误信息</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.3"><p id="p1687631110123"><a name="p1687631110123"></a><a name="p1687631110123"></a>处理措施</p>
</th>
</tr>
</thead>
<tbody><tr id="row1687961171220"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p20954103981711"><a name="p20954103981711"></a><a name="p20954103981711"></a>SVCSTG_AMS_4000115</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p29541539201713"><a name="p29541539201713"></a><a name="p29541539201713"></a>Request param is invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p7954113941718"><a name="p7954113941718"></a><a name="p7954113941718"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row16880411161212"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p495453931711"><a name="p495453931711"></a><a name="p495453931711"></a>SVCSTG_AMS_5030001</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p1954163918177"><a name="p1954163918177"></a><a name="p1954163918177"></a>Cassandra session is null</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p79541039101711"><a name="p79541039101711"></a><a name="p79541039101711"></a>请联系管理员解决。</p>
</td>
</tr>
<tr id="row199791311201315"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p2954133991712"><a name="p2954133991712"></a><a name="p2954133991712"></a>SVCSTG_AMS_5030002</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p5954183918174"><a name="p5954183918174"></a><a name="p5954183918174"></a>Cassandra execute exception</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p16954183941711"><a name="p16954183941711"></a><a name="p16954183941711"></a>请联系管理员解决。</p>
</td>
</tr>
</tbody>
</table>

