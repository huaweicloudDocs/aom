# 查询阈值规则列表<a name="ZH-CN_TOPIC_0096010431"></a>

## 功能介绍<a name="section40472731"></a>

该接口用于查询阈值规则列表。

## URI<a name="section28710264"></a>

GET /v1/\{project\_id\}/ams/alarms

## 请求消息<a name="section57065789"></a>

**请求参数**

请求参数如[表1](#d0e2975)所示。

**表 1**  请求参数

<a name="d0e2975"></a>
<table><thead align="left"><tr id="row19249174"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p15679275"><a name="p15679275"></a><a name="p15679275"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13%" id="mcps1.2.6.1.2"><p id="p62061748"><a name="p62061748"></a><a name="p62061748"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="18%" id="mcps1.2.6.1.3"><p id="p60945690"><a name="p60945690"></a><a name="p60945690"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="26%" id="mcps1.2.6.1.4"><p id="p37653828"><a name="p37653828"></a><a name="p37653828"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="23%" id="mcps1.2.6.1.5"><p id="p30061210"><a name="p30061210"></a><a name="p30061210"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row19038982"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p65762541"><a name="p65762541"></a><a name="p65762541"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.6.1.2 "><p id="p25165625"><a name="p25165625"></a><a name="p25165625"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.6.1.3 "><p id="p25149778"><a name="p25149778"></a><a name="p25149778"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="26%" headers="mcps1.2.6.1.4 "><p id="p23866143"><a name="p23866143"></a><a name="p23866143"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.6.1.5 "><p id="p54109449"><a name="p54109449"></a><a name="p54109449"></a>租户从IAM申请到的projectid，一般为32位字符串；运维侧调用可选om或manage——其中om表示运维侧命名空间，manage表示租户侧命名空间。</p>
</td>
</tr>
<tr id="row17222996"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p52885427"><a name="p52885427"></a><a name="p52885427"></a>limit</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.6.1.2 "><p id="p55861219"><a name="p55861219"></a><a name="p55861219"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.6.1.3 "><p id="p28464908"><a name="p28464908"></a><a name="p28464908"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="26%" headers="mcps1.2.6.1.4 "><p id="p23956181"><a name="p23956181"></a><a name="p23956181"></a>(0,1000]</p>
</td>
<td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.6.1.5 "><p id="p61402470"><a name="p61402470"></a><a name="p61402470"></a>取值范围(0,1000]，默认值为1000。</p>
<p id="p15751321"><a name="p15751321"></a><a name="p15751321"></a>用于限制结果数据条数。</p>
</td>
</tr>
<tr id="row7544168"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p7097858"><a name="p7097858"></a><a name="p7097858"></a>start</p>
</td>
<td class="cellrowborder" valign="top" width="13%" headers="mcps1.2.6.1.2 "><p id="p38055645"><a name="p38055645"></a><a name="p38055645"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="18%" headers="mcps1.2.6.1.3 "><p id="p62608417"><a name="p62608417"></a><a name="p62608417"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="26%" headers="mcps1.2.6.1.4 "><p id="p38116980"><a name="p38116980"></a><a name="p38116980"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.6.1.5 "><p id="p467713"><a name="p467713"></a><a name="p467713"></a>分页信息</p>
</td>
</tr>
</tbody>
</table>

**Header说明**

请求消息头（Header）如[表2](#table17428844137)所示。

**表 2**  Header说明

<a name="table17428844137"></a>
<table><thead align="left"><tr id="row1542824171318"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p18428241134"><a name="p18428241134"></a><a name="p18428241134"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p1142819412139"><a name="p1142819412139"></a><a name="p1142819412139"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p1742816441311"><a name="p1742816441311"></a><a name="p1742816441311"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1942834191319"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p166451516193818"><a name="p166451516193818"></a><a name="p166451516193818"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p464591643812"><a name="p464591643812"></a><a name="p464591643812"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p156451416173813"><a name="p156451416173813"></a><a name="p156451416173813"></a>从IAM服务获取的用户Token。</p>
</td>
</tr>
<tr id="row2428124181313"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p464641619384"><a name="p464641619384"></a><a name="p464641619384"></a>Content-Type</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p464631663813"><a name="p464631663813"></a><a name="p464631663813"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p1464691683810"><a name="p1464691683810"></a><a name="p1464691683810"></a>指定类型为application/json。</p>
</td>
</tr>
</tbody>
</table>

## 响应消息<a name="section43830060"></a>

**响应参数**

响应参数如[表3](#d0e3063)所示。

**表 3**  响应参数

<a name="d0e3063"></a>
<table><thead align="left"><tr id="row27050528"><th class="cellrowborder" valign="top" width="29.592959295929592%" id="mcps1.2.4.1.1"><p id="p43609175"><a name="p43609175"></a><a name="p43609175"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="36.733673367336735%" id="mcps1.2.4.1.2"><p id="p42682315"><a name="p42682315"></a><a name="p42682315"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.673367336733676%" id="mcps1.2.4.1.3"><p id="p34715491"><a name="p34715491"></a><a name="p34715491"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row60491400"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p856353"><a name="p856353"></a><a name="p856353"></a>errorCode</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p2255767"><a name="p2255767"></a><a name="p2255767"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p48499409"><a name="p48499409"></a><a name="p48499409"></a>响应码。</p>
</td>
</tr>
<tr id="row33841499"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p56806903"><a name="p56806903"></a><a name="p56806903"></a>errorMessage</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p37956427"><a name="p37956427"></a><a name="p37956427"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p54571776"><a name="p54571776"></a><a name="p54571776"></a>响应信息描述。</p>
</td>
</tr>
<tr id="row21383942"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p54377775"><a name="p54377775"></a><a name="p54377775"></a>metaData</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p42523660"><a name="p42523660"></a><a name="p42523660"></a>JSON对象</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p21864454"><a name="p21864454"></a><a name="p21864454"></a>查询结果元数据信息，包括分页信息等。</p>
</td>
</tr>
<tr id="row62562361"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p34386472"><a name="p34386472"></a><a name="p34386472"></a>metaData.count</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p33840872"><a name="p33840872"></a><a name="p33840872"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p56756129"><a name="p56756129"></a><a name="p56756129"></a>当前返回结果条数。</p>
</td>
</tr>
<tr id="row41043114"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p36157898"><a name="p36157898"></a><a name="p36157898"></a>metaData.total</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p43108598"><a name="p43108598"></a><a name="p43108598"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p2135575"><a name="p2135575"></a><a name="p2135575"></a>总条数。</p>
</td>
</tr>
<tr id="row19220183"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p13331010"><a name="p13331010"></a><a name="p13331010"></a>metaData.start</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p6070038"><a name="p6070038"></a><a name="p6070038"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p21911033"><a name="p21911033"></a><a name="p21911033"></a>下一个开始的标记，用于分页。</p>
</td>
</tr>
<tr id="row62981577"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p1234121"><a name="p1234121"></a><a name="p1234121"></a>thresholds</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p32854957"><a name="p32854957"></a><a name="p32854957"></a>JSON数组</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p44005854"><a name="p44005854"></a><a name="p44005854"></a>阈值规则列表。</p>
</td>
</tr>
</tbody>
</table>

**响应示例**

```
{ 
    "errorCode": "SVCSTG.AMS.2000", 
    "errorMessage": "success", 
    "metaData": { 
      "count": 10, 
      "start": null, 
      "total": 100 
    }, 
    "thresholds":  
    [ 
    { 
        "id": "2137", 
        "alarmName": "aaaaaaaa", 
        "alarmDescription": "", 
        "actionEnabled": false, 
        "okActions": [], 
        "alarmActions": [], 
        "insufficientDataActions": [], 
        "stateValue": "alarm", 
        "stateReason": "", 
        "stateUpdatedTimestamp": null, 
        "metricName": "cpuCoreLimit", 
        "namespace": "PAAS.CONTAINER", 
        "statistic": "average", 
        "dimensions": [ 
            { 
                "name": "appName", 
                "value": "rhm-broker" 
            } 
        ], 
        "period": 60000, 
        "evaluationPeriods": 1, 
        "unit": "Core", 
        "threshold": "0", 
        "comparisonOperator": ">=", 
        "alarmAdvice": "", 
        "alarmLevel": 3 
    } 
    ] 
}
```

## 状态码<a name="section58926220"></a>

-   正常

    状态码如[表4](#d0e3181)所示。


**表 4**  状态码

<a name="d0e3181"></a>
<table><thead align="left"><tr id="row24151268"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p10095715"><a name="p10095715"></a><a name="p10095715"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p12446582"><a name="p12446582"></a><a name="p12446582"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1540230"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p57649786"><a name="p57649786"></a><a name="p57649786"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p39121083"><a name="p39121083"></a><a name="p39121083"></a>查询警报成功</p>
</td>
</tr>
</tbody>
</table>

-   异常

    状态码如[表5](#d0e3210)所示。更多状态码请见[状态码](状态码.md)


**表 5**  状态码

<a name="d0e3210"></a>
<table><thead align="left"><tr id="row46871616"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p38504561"><a name="p38504561"></a><a name="p38504561"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p31861738"><a name="p31861738"></a><a name="p31861738"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row30664020"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p757719"><a name="p757719"></a><a name="p757719"></a>400 Bad Request</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p61375258"><a name="p61375258"></a><a name="p61375258"></a>请求错误。</p>
</td>
</tr>
<tr id="row15506411"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p48059761"><a name="p48059761"></a><a name="p48059761"></a>401 Unauthorized</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p526605"><a name="p526605"></a><a name="p526605"></a>未提供认证信息，或认证信息错。</p>
</td>
</tr>
<tr id="row4739445"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p48350794"><a name="p48350794"></a><a name="p48350794"></a>403 Forbidden</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p24100264"><a name="p24100264"></a><a name="p24100264"></a>请求页面被禁止访问。</p>
</td>
</tr>
<tr id="row15575785"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p53679078"><a name="p53679078"></a><a name="p53679078"></a>500 Internal Server Error</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p53038080"><a name="p53038080"></a><a name="p53038080"></a>请求未完成，服务异常。</p>
</td>
</tr>
<tr id="row7580675"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p10054930"><a name="p10054930"></a><a name="p10054930"></a>503 Service Unavailable</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p9143026"><a name="p9143026"></a><a name="p9143026"></a>系统暂时不可用，请求受限。</p>
</td>
</tr>
</tbody>
</table>

## 错误码<a name="section180881121217"></a>

**表 6**  错误码

<a name="table4880211161220"></a>
<table><thead align="left"><tr id="row58767117124"><th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.1"><p id="p1287611131219"><a name="p1287611131219"></a><a name="p1287611131219"></a>错误码</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.2"><p id="p14876141115124"><a name="p14876141115124"></a><a name="p14876141115124"></a>错误信息</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.3"><p id="p1687631110123"><a name="p1687631110123"></a><a name="p1687631110123"></a>处理措施</p>
</th>
</tr>
</thead>
<tbody><tr id="row1687961171220"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p020502120165"><a name="p020502120165"></a><a name="p020502120165"></a>SVCSTG_AMS_4000109</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p1205112161612"><a name="p1205112161612"></a><a name="p1205112161612"></a>Request projectId is invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p7205122181619"><a name="p7205122181619"></a><a name="p7205122181619"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row16880411161212"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p9205142141620"><a name="p9205142141620"></a><a name="p9205142141620"></a>SVCSTG_AMS_4000110</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p172054218168"><a name="p172054218168"></a><a name="p172054218168"></a>Request param 'limit' is invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p1420572121611"><a name="p1420572121611"></a><a name="p1420572121611"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row199791311201315"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p16205921191619"><a name="p16205921191619"></a><a name="p16205921191619"></a>SVCSTG_AMS_4000111</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p13205162110169"><a name="p13205162110169"></a><a name="p13205162110169"></a>Request param 'start' is invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p9206122115163"><a name="p9206122115163"></a><a name="p9206122115163"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row197681423141313"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p12204162112168"><a name="p12204162112168"></a><a name="p12204162112168"></a>SVCSTG_AMS_5030001</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p1204192116161"><a name="p1204192116161"></a><a name="p1204192116161"></a>Cassandra session is null</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p8204152120163"><a name="p8204152120163"></a><a name="p8204152120163"></a>请联系管理员解决。</p>
</td>
</tr>
<tr id="row5221112601314"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p7204221121611"><a name="p7204221121611"></a><a name="p7204221121611"></a>SVCSTG_AMS_5030002</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p320492117162"><a name="p320492117162"></a><a name="p320492117162"></a>Cassandra execute exception</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p12205192161612"><a name="p12205192161612"></a><a name="p12205192161612"></a>请联系管理员解决。</p>
</td>
</tr>
</tbody>
</table>

