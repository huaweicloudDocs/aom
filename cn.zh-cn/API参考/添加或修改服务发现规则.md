# 添加或修改服务发现规则<a name="ZH-CN_TOPIC_0135029313"></a>

## 功能介绍<a name="section775437142811"></a>

该接口用于添加或修改一条或多条服务发现规则。同一projectid下可添加的规则上限为100条。

## URI<a name="section197151617195919"></a>

PUT /v1/\{project\_id\}/inv/servicediscoveryrules

## 请求消息<a name="section21065718117"></a>

**请求参数**

请求参数如[表1](#table111641117112513)所示。

**表 1**  请求参数

<a name="table111641117112513"></a>
<table><thead align="left"><tr id="row1219018175254"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p1719761714250"><a name="p1719761714250"></a><a name="p1719761714250"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p32046171258"><a name="p32046171258"></a><a name="p32046171258"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p1520961714258"><a name="p1520961714258"></a><a name="p1520961714258"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p192121917192512"><a name="p192121917192512"></a><a name="p192121917192512"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p142181517172515"><a name="p142181517172515"></a><a name="p142181517172515"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row72241017102511"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p148701422162510"><a name="p148701422162510"></a><a name="p148701422162510"></a>appRules</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p38681722122514"><a name="p38681722122514"></a><a name="p38681722122514"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p7223835102717"><a name="p7223835102717"></a><a name="p7223835102717"></a>json array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p68621422142519"><a name="p68621422142519"></a><a name="p68621422142519"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p108616221254"><a name="p108616221254"></a><a name="p108616221254"></a>详见<a href="#table121871221724">表2</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 2**  appRules参数

<a name="table121871221724"></a>
<table><thead align="left"><tr id="row7187132112213"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p1084365114316"><a name="p1084365114316"></a><a name="p1084365114316"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p128431951838"><a name="p128431951838"></a><a name="p128431951838"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p1784319511231"><a name="p1784319511231"></a><a name="p1784319511231"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p1784395113312"><a name="p1784395113312"></a><a name="p1784395113312"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p188439510315"><a name="p188439510315"></a><a name="p188439510315"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1018819218217"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p41344401753"><a name="p41344401753"></a><a name="p41344401753"></a>projectid</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p1713515402516"><a name="p1713515402516"></a><a name="p1713515402516"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p10135194020515"><a name="p10135194020515"></a><a name="p10135194020515"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p2135440851"><a name="p2135440851"></a><a name="p2135440851"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p013517402517"><a name="p013517402517"></a><a name="p013517402517"></a>租户从IAM申请到的projectid，一般为32位字符串。</p>
</td>
</tr>
<tr id="row75081233848"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p21356402510"><a name="p21356402510"></a><a name="p21356402510"></a>id</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p12135184019512"><a name="p12135184019512"></a><a name="p12135184019512"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p19135164015516"><a name="p19135164015516"></a><a name="p19135164015516"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p1613517401852"><a name="p1613517401852"></a><a name="p1613517401852"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p713516402512"><a name="p713516402512"></a><a name="p713516402512"></a>创建时填空，修改时填规则ID。</p>
</td>
</tr>
<tr id="row1497315291452"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p18135154015519"><a name="p18135154015519"></a><a name="p18135154015519"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p101351940458"><a name="p101351940458"></a><a name="p101351940458"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1013516404513"><a name="p1013516404513"></a><a name="p1013516404513"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p1613517402510"><a name="p1613517402510"></a><a name="p1613517402510"></a>字符长度小于64位，以小写字母(a-z)开头，只能包含0-9/a-z/-，不能以-结尾。</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p1513512409513"><a name="p1513512409513"></a><a name="p1513512409513"></a>规则名称。</p>
</td>
</tr>
<tr id="row2044613710518"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p313610407514"><a name="p313610407514"></a><a name="p313610407514"></a>createTime</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p31361940358"><a name="p31361940358"></a><a name="p31361940358"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p513617405519"><a name="p513617405519"></a><a name="p513617405519"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p19136154013512"><a name="p19136154013512"></a><a name="p19136154013512"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p131361401512"><a name="p131361401512"></a><a name="p131361401512"></a>创建时间（创建时不传，修改时传查询返回的createTime）</p>
</td>
</tr>
<tr id="row1515223515516"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1313618401552"><a name="p1313618401552"></a><a name="p1313618401552"></a>enable</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p201363401652"><a name="p201363401652"></a><a name="p201363401652"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p121364405513"><a name="p121364405513"></a><a name="p121364405513"></a>boolean</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p131361401251"><a name="p131361401251"></a><a name="p131361401251"></a>true、false</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p813694018513"><a name="p813694018513"></a><a name="p813694018513"></a>规则是否启用。</p>
</td>
</tr>
<tr id="row347311273511"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p2013624012514"><a name="p2013624012514"></a><a name="p2013624012514"></a>hostid</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p71368401151"><a name="p71368401151"></a><a name="p71368401151"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p740963517493"><a name="p740963517493"></a><a name="p740963517493"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p1913634019517"><a name="p1913634019517"></a><a name="p1913634019517"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p11861327157"><a name="p11861327157"></a><a name="p11861327157"></a>主机ID（暂不使用，传空即可）。</p>
</td>
</tr>
<tr id="row163061925556"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1913617406512"><a name="p1913617406512"></a><a name="p1913617406512"></a>eventName</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p201361340557"><a name="p201361340557"></a><a name="p201361340557"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p113611407510"><a name="p113611407510"></a><a name="p113611407510"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p213612407517"><a name="p213612407517"></a><a name="p213612407517"></a>aom_inventory_rules_event</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p313712401856"><a name="p313712401856"></a><a name="p313712401856"></a>规则事件名称，对于服务发现固定为"aom_inventory_rules_event"</p>
</td>
</tr>
<tr id="row197287221514"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1137440859"><a name="p1137440859"></a><a name="p1137440859"></a>spec</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p101371540951"><a name="p101371540951"></a><a name="p101371540951"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1713734013511"><a name="p1713734013511"></a><a name="p1713734013511"></a>对象</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p101374401559"><a name="p101374401559"></a><a name="p101374401559"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p1137440555"><a name="p1137440555"></a><a name="p1137440555"></a>规则详情。详见<a href="#table11818056360">表3</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 3**  spec参数

<a name="table11818056360"></a>
<table><thead align="left"><tr id="row58191356864"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p64933464710"><a name="p64933464710"></a><a name="p64933464710"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p10493204610712"><a name="p10493204610712"></a><a name="p10493204610712"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p154936465717"><a name="p154936465717"></a><a name="p154936465717"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p5493124611720"><a name="p5493124611720"></a><a name="p5493124611720"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p84931346676"><a name="p84931346676"></a><a name="p84931346676"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row4819135615615"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p18313355171"><a name="p18313355171"></a><a name="p18313355171"></a>detectLog</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p3831113518171"><a name="p3831113518171"></a><a name="p3831113518171"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1383173561711"><a name="p1383173561711"></a><a name="p1383173561711"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p683183581718"><a name="p683183581718"></a><a name="p683183581718"></a>true、false</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p6831435111715"><a name="p6831435111715"></a><a name="p6831435111715"></a>是否开启日志采集。</p>
</td>
</tr>
<tr id="row6207114451615"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p5831103581710"><a name="p5831103581710"></a><a name="p5831103581710"></a>logFileFix</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p5831335101719"><a name="p5831335101719"></a><a name="p5831335101719"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1283113511172"><a name="p1283113511172"></a><a name="p1283113511172"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p483223519175"><a name="p483223519175"></a><a name="p483223519175"></a>log、trace、out</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p158321035141720"><a name="p158321035141720"></a><a name="p158321035141720"></a>日志文件的后缀。</p>
</td>
</tr>
<tr id="row64001542141615"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p158331352171"><a name="p158331352171"></a><a name="p158331352171"></a>discoveryRule</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p1983315352170"><a name="p1983315352170"></a><a name="p1983315352170"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p19834183518179"><a name="p19834183518179"></a><a name="p19834183518179"></a>json array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><a name="ul411515114311"></a><a name="ul411515114311"></a><ul id="ul411515114311"><li>checkType为cmdLine时checkMode填contain，checkContent格式为[“xxx”]表示进程命令行参数中需要包含xxx。</li><li>checkType为env时checkMode填contain，checkContent格式为 ["k1","v1"]表示进程环境变量中需要包含名为k1值为v1的环境变量。</li><li>checkType为scope时checkMode填equals，checkContent格式为节点ID数组["hostId1”,”hostId2”]，表示规则仅会在这些节点上生效（如果不指定节点范围，规则将下发到该项目所有的节点）。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p776610214413"><a name="p776610214413"></a><a name="p776610214413"></a>规则发现部分，数组中有多个对象时表示需要同时满足所有条件的进程才会被匹配到。详见<a href="#table1341917405581">表4</a>。</p>
</td>
</tr>
<tr id="row145711832101619"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p583593517172"><a name="p583593517172"></a><a name="p583593517172"></a>attrList</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p188353356172"><a name="p188353356172"></a><a name="p188353356172"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p15835153514176"><a name="p15835153514176"></a><a name="p15835153514176"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p13835203521715"><a name="p13835203521715"></a><a name="p13835203521715"></a>cmdLine、env</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p2070617203152"><a name="p2070617203152"></a><a name="p2070617203152"></a>属性列表（暂不使用，可不传）。</p>
</td>
</tr>
<tr id="row1562143011165"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p48351735141716"><a name="p48351735141716"></a><a name="p48351735141716"></a>isDetect</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p1683573591716"><a name="p1683573591716"></a><a name="p1683573591716"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p17835335161718"><a name="p17835335161718"></a><a name="p17835335161718"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p4835163510171"><a name="p4835163510171"></a><a name="p4835163510171"></a>true、false</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p283519359174"><a name="p283519359174"></a><a name="p283519359174"></a>是否为规则预探测场景（预探测场景不会保存规则，仅用于规则下发之前对规则正确性的检测）。</p>
</td>
</tr>
<tr id="row674116288160"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p983514356171"><a name="p983514356171"></a><a name="p983514356171"></a>isDefaultRule</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p118351235171714"><a name="p118351235171714"></a><a name="p118351235171714"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p18351735121716"><a name="p18351735121716"></a><a name="p18351735121716"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p48351235161719"><a name="p48351235161719"></a><a name="p48351235161719"></a>true、false</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p18835183519173"><a name="p18835183519173"></a><a name="p18835183519173"></a>是否为默认规则。</p>
</td>
</tr>
<tr id="row474016261163"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p11835133512170"><a name="p11835133512170"></a><a name="p11835133512170"></a>priority</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p118356352178"><a name="p118356352178"></a><a name="p118356352178"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p483573517171"><a name="p483573517171"></a><a name="p483573517171"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p383533551716"><a name="p383533551716"></a><a name="p383533551716"></a>1~9999的整数，默认取值为9999</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p7836735151712"><a name="p7836735151712"></a><a name="p7836735151712"></a>规则优先级。</p>
</td>
</tr>
<tr id="row108551524171614"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p2083610358175"><a name="p2083610358175"></a><a name="p2083610358175"></a>nameRule</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p383683591710"><a name="p383683591710"></a><a name="p383683591710"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p108363353178"><a name="p108363353178"></a><a name="p108363353178"></a>json</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p158361835191711"><a name="p158361835191711"></a><a name="p158361835191711"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p11836123511175"><a name="p11836123511175"></a><a name="p11836123511175"></a>服务发现规则命名部分。详见<a href="#table12918193513615">表5</a>。</p>
</td>
</tr>
<tr id="row1182017564613"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p19840103519172"><a name="p19840103519172"></a><a name="p19840103519172"></a>appType</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p10840435191719"><a name="p10840435191719"></a><a name="p10840435191719"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p7840535101713"><a name="p7840535101713"></a><a name="p7840535101713"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p10840103519175"><a name="p10840103519175"></a><a name="p10840103519175"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p178409356170"><a name="p178409356170"></a><a name="p178409356170"></a>服务类型，用于标记服务的分类，仅用于规则分类和界面展示。可以填写任意字段，如按技术栈分类可填写Java，Python。按作用分类可填写collector(采集)，database(数据库)等。</p>
</td>
</tr>
<tr id="row3822956765"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p284063518176"><a name="p284063518176"></a><a name="p284063518176"></a>logPathRule</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p1484012352172"><a name="p1484012352172"></a><a name="p1484012352172"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1888244182117"><a name="p1888244182117"></a><a name="p1888244182117"></a>json array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><a name="ul1248851713226"></a><a name="ul1248851713226"></a><ul id="ul1248851713226"><li>当cmdLineHash为固定字符串时，指定日志路径或者日志文件。否则只采集进程当前打开的以.log和.trace结尾的文件。</li><li>nameType取值cmdLineHash时，args格式为["00001"]，value格式为["/xxx/xx.log"]，表示当启动命令是00001时，日志路径为/xxx/xx.log。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p090416400217"><a name="p090416400217"></a><a name="p090416400217"></a>日志路径配置规则。详见<a href="#table1449092682014">表8</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 4**  discoveryRule参数

<a name="table1341917405581"></a>
<table><thead align="left"><tr id="row19419164012585"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p35391657595"><a name="p35391657595"></a><a name="p35391657595"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p2054315514592"><a name="p2054315514592"></a><a name="p2054315514592"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p175492514596"><a name="p175492514596"></a><a name="p175492514596"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p17554115185914"><a name="p17554115185914"></a><a name="p17554115185914"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p138721166015"><a name="p138721166015"></a><a name="p138721166015"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row104191840155810"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p14834123514172"><a name="p14834123514172"></a><a name="p14834123514172"></a>checkType</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p15834135141717"><a name="p15834135141717"></a><a name="p15834135141717"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p17834153515171"><a name="p17834153515171"></a><a name="p17834153515171"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p383423510172"><a name="p383423510172"></a><a name="p383423510172"></a>cmdLine、env、scope</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p158721362017"><a name="p158721362017"></a><a name="p158721362017"></a>匹配类型。</p>
</td>
</tr>
<tr id="row124215409583"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p14834193515177"><a name="p14834193515177"></a><a name="p14834193515177"></a>checkMode</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p6834183517175"><a name="p6834183517175"></a><a name="p6834183517175"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p108341935161711"><a name="p108341935161711"></a><a name="p108341935161711"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p148348355170"><a name="p148348355170"></a><a name="p148348355170"></a>contain、equals</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p10872461904"><a name="p10872461904"></a><a name="p10872461904"></a>匹配条件。</p>
</td>
</tr>
<tr id="row1942110407588"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1183418351172"><a name="p1183418351172"></a><a name="p1183418351172"></a>checkContent</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p98341835151710"><a name="p98341835151710"></a><a name="p98341835151710"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p2834113511719"><a name="p2834113511719"></a><a name="p2834113511719"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p138341035151714"><a name="p138341035151714"></a><a name="p138341035151714"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p14835535171716"><a name="p14835535171716"></a><a name="p14835535171716"></a>匹配值。</p>
</td>
</tr>
</tbody>
</table>

**表 5**  nameRule参数

<a name="table12918193513615"></a>
<table><thead align="left"><tr id="row5948335864"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p1795319351368"><a name="p1795319351368"></a><a name="p1795319351368"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p49585351562"><a name="p49585351562"></a><a name="p49585351562"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p1696414351863"><a name="p1696414351863"></a><a name="p1696414351863"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p696963516619"><a name="p696963516619"></a><a name="p696963516619"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p29743351869"><a name="p29743351869"></a><a name="p29743351869"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row139806354615"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1483614355178"><a name="p1483614355178"></a><a name="p1483614355178"></a>appNameRule</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p283663513173"><a name="p283663513173"></a><a name="p283663513173"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p10843103781718"><a name="p10843103781718"></a><a name="p10843103781718"></a>json array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><a name="ul19230951115"></a><a name="ul19230951115"></a><ul id="ul19230951115"><li>nameType取值cmdLine时args格式为["start","end"]，表示抽取命令行中start、end之间的字符。</li><li>nameType取值cmdLine时args格式为 ["aa"]，表示抽取环境变量名为aa对应的环境变量值。</li><li>nameType取值str时，args格式为["fix"]，表示服务名称最后拼接固定文字fix。</li><li>nameType取值cmdLineHash时，args格式为["0001"]，value格式为["ser"]，表示当启动命令是0001时，服务名称为ser。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p1783673531718"><a name="p1783673531718"></a><a name="p1783673531718"></a>服务命名部分，数组中有多个对象时表示将每个对象抽取到的字符串拼接作为服务的名称。详见<a href="#table278381117101">表6</a>。</p>
</td>
</tr>
<tr id="row1621595219126"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p88381935191718"><a name="p88381935191718"></a><a name="p88381935191718"></a>applicationNameRule</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p5838183516176"><a name="p5838183516176"></a><a name="p5838183516176"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1183853561710"><a name="p1183853561710"></a><a name="p1183853561710"></a>json array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><a name="ul1749219471019"></a><a name="ul1749219471019"></a><ul id="ul1749219471019"><li>nameType取值cmdLine时args格式为["start","end"]，表示抽取命令行中start、end之间的字符。</li><li>nameType取值cmdLine时args格式为 ["aa"]，表示抽取环境变量名为aa对应的环境变量值。</li><li>nameType取值str时，args格式为["fix"]，表示服务名称最后拼接固定文字fix。</li><li>nameType取值cmdLineHash时，args格式为["0001"]，value格式为["ser"]，表示当启动命令是0001时，应用名称为ser。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p383843517178"><a name="p383843517178"></a><a name="p383843517178"></a>应用命名部分。详见<a href="#table435095814116">表7</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 6**  appNameRule参数

<a name="table278381117101"></a>
<table><thead align="left"><tr id="row158101911161013"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p381581121017"><a name="p381581121017"></a><a name="p381581121017"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p682014116100"><a name="p682014116100"></a><a name="p682014116100"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p1282521191019"><a name="p1282521191019"></a><a name="p1282521191019"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p6831411161012"><a name="p6831411161012"></a><a name="p6831411161012"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p1483617116104"><a name="p1483617116104"></a><a name="p1483617116104"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row7844311171011"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p48361535181719"><a name="p48361535181719"></a><a name="p48361535181719"></a>nameType</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p1683653581715"><a name="p1683653581715"></a><a name="p1683653581715"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p683719353176"><a name="p683719353176"></a><a name="p683719353176"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p19837203561710"><a name="p19837203561710"></a><a name="p19837203561710"></a>cmdLineHash、cmdLine、env、str</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p2837113510178"><a name="p2837113510178"></a><a name="p2837113510178"></a>取值类型。</p>
</td>
</tr>
<tr id="row387321131017"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p15837133541715"><a name="p15837133541715"></a><a name="p15837133541715"></a>args</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p1838173517173"><a name="p1838173517173"></a><a name="p1838173517173"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p14838173512174"><a name="p14838173512174"></a><a name="p14838173512174"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p7838735191711"><a name="p7838735191711"></a><a name="p7838735191711"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p88385353172"><a name="p88385353172"></a><a name="p88385353172"></a>输入值。</p>
</td>
</tr>
<tr id="row11903111101019"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p7838103517178"><a name="p7838103517178"></a><a name="p7838103517178"></a>value</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p98385353172"><a name="p98385353172"></a><a name="p98385353172"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p15838935191712"><a name="p15838935191712"></a><a name="p15838935191712"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p3838193541715"><a name="p3838193541715"></a><a name="p3838193541715"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p883803521715"><a name="p883803521715"></a><a name="p883803521715"></a>服务名（仅nameType为cmdLineHash时填写）。</p>
</td>
</tr>
</tbody>
</table>

**表 7**  applicationNameRule参数

<a name="table435095814116"></a>
<table><thead align="left"><tr id="row6378858151119"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p1385125841110"><a name="p1385125841110"></a><a name="p1385125841110"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p239185861119"><a name="p239185861119"></a><a name="p239185861119"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p1040065818111"><a name="p1040065818111"></a><a name="p1040065818111"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p840755813118"><a name="p840755813118"></a><a name="p840755813118"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p15413155871110"><a name="p15413155871110"></a><a name="p15413155871110"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row34201758151111"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p15838163521711"><a name="p15838163521711"></a><a name="p15838163521711"></a>nameType</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p58391235191716"><a name="p58391235191716"></a><a name="p58391235191716"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p583943514174"><a name="p583943514174"></a><a name="p583943514174"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p28391235101712"><a name="p28391235101712"></a><a name="p28391235101712"></a>cmdLineHash、cmdLine、env、str</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p10839183561713"><a name="p10839183561713"></a><a name="p10839183561713"></a>取值类型。</p>
</td>
</tr>
<tr id="row174581058161110"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p983912358177"><a name="p983912358177"></a><a name="p983912358177"></a>args</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p18392035131710"><a name="p18392035131710"></a><a name="p18392035131710"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p148392035101713"><a name="p148392035101713"></a><a name="p148392035101713"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p683943516178"><a name="p683943516178"></a><a name="p683943516178"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p1183913515176"><a name="p1183913515176"></a><a name="p1183913515176"></a>输入值。</p>
</td>
</tr>
<tr id="row54951158161114"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p683973515171"><a name="p683973515171"></a><a name="p683973515171"></a>value</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p15839535151714"><a name="p15839535151714"></a><a name="p15839535151714"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p4839735151717"><a name="p4839735151717"></a><a name="p4839735151717"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p5839935191711"><a name="p5839935191711"></a><a name="p5839935191711"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p28391535171710"><a name="p28391535171710"></a><a name="p28391535171710"></a>应用名（仅nameType为cmdLineHash时填写）。</p>
</td>
</tr>
</tbody>
</table>

**表 8**  logPathRule参数

<a name="table1449092682014"></a>
<table><thead align="left"><tr id="row3518026102012"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p125221526132010"><a name="p125221526132010"></a><a name="p125221526132010"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p1452912617204"><a name="p1452912617204"></a><a name="p1452912617204"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p3534142642017"><a name="p3534142642017"></a><a name="p3534142642017"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p14539142618204"><a name="p14539142618204"></a><a name="p14539142618204"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p55453264201"><a name="p55453264201"></a><a name="p55453264201"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row35531626162013"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p16840193561713"><a name="p16840193561713"></a><a name="p16840193561713"></a>nameType</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p158406358174"><a name="p158406358174"></a><a name="p158406358174"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p284010353179"><a name="p284010353179"></a><a name="p284010353179"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p188401635121717"><a name="p188401635121717"></a><a name="p188401635121717"></a>cmdLineHash</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p884083531718"><a name="p884083531718"></a><a name="p884083531718"></a>取值类型。</p>
</td>
</tr>
<tr id="row175861626122020"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p5840133513171"><a name="p5840133513171"></a><a name="p5840133513171"></a>args</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p118401535171714"><a name="p118401535171714"></a><a name="p118401535171714"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p28408351176"><a name="p28408351176"></a><a name="p28408351176"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p1584033531716"><a name="p1584033531716"></a><a name="p1584033531716"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p158405354177"><a name="p158405354177"></a><a name="p158405354177"></a>命令行。</p>
</td>
</tr>
<tr id="row106201626192013"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p19840113581715"><a name="p19840113581715"></a><a name="p19840113581715"></a>value</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p784083561716"><a name="p784083561716"></a><a name="p784083561716"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p13840133521715"><a name="p13840133521715"></a><a name="p13840133521715"></a>array</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p78411355179"><a name="p78411355179"></a><a name="p78411355179"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p6841635121719"><a name="p6841635121719"></a><a name="p6841635121719"></a>日志路径。</p>
</td>
</tr>
</tbody>
</table>

**Header说明**

请求消息头（Header）如[表9](#table182161643144)所示。

**表 9**  Header说明

<a name="table182161643144"></a>
<table><thead align="left"><tr id="row42161449146"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p9540193731412"><a name="p9540193731412"></a><a name="p9540193731412"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p195401237141415"><a name="p195401237141415"></a><a name="p195401237141415"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p125411737111417"><a name="p125411737111417"></a><a name="p125411737111417"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1321713471415"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p25411237171413"><a name="p25411237171413"></a><a name="p25411237171413"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p12541437191411"><a name="p12541437191411"></a><a name="p12541437191411"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p17541163731420"><a name="p17541163731420"></a><a name="p17541163731420"></a>从IAM服务获取的用户Token。</p>
</td>
</tr>
<tr id="row1938317123148"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p15411337121418"><a name="p15411337121418"></a><a name="p15411337121418"></a>Content-Type</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p11541837121410"><a name="p11541837121410"></a><a name="p11541837121410"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p17541153716142"><a name="p17541153716142"></a><a name="p17541153716142"></a>指定类型为application/json。</p>
</td>
</tr>
</tbody>
</table>

**请求示例**

```
{
    "appRules": [
        {
            "id": "",
            "name": "bytest",
            "createTime": "",
            "projectid": "5a6036f48e954fcd84d198cb28db311a",
            "enable": true,
            "hostid": [],
            "eventName": "aom_inventory_rules_event",
            "spec": {
                "detectLog": "true",
                "logFileFix": ["log","trace"],
                "discoveryRule": [
                    {
                        "checkType": "cmdLine",
                        "checkMode": "contain",
                        "checkContent": ["default"]
                    },{
                        "checkType": "scope",
                        "checkMode": "equals",
                        "checkContent": [
                            "44d6c4bb-f673-4bf4-8d33-313832f37b28"
                        ]
                    }
                ],
                "attrList": ["cmdLine"],
                "isDetect": "false",
                "priority": "1",
                "nameRule": {
                    "appNameRule": [
                        {
                            "nameType":"cmdLineHash",
                            "agrs":["00000000001"],
                            "value":["serviceName1"]
                        },
                        {
                            "nameType": "cmdLine",
                            "args": [
                                "/var/paas/kubernetes/","/kubeconfig"
                            ]
                        },
                        {
                            "nameType": "env",
                            "args": ["APP_NAME"]
                        },
                        {
                            "nameType": "str",
                            "args": ["kube"]
                        }
                    ],
                    "applicationNameRule": [
                        {
                            "nameType":"cmdLineHash",
                            "agrs":["00000000001"],
                            "value":[" applicationName1"]
                        },

                        {
                            "nameType": "str",
                            "args": [kubeproxy"]
                        }
                    ]
                },
                "appType": "",
                "isDefaultRule":"false",
                "logPathRule": [
                    {
                        "nameType":"cmdLineHash",
                        "agrs":["00000000001"],
                        "value":["/xx/xxx/xx.log","/xx/xxx/xx"]
                    }
                ]
            }
        }
    ]
}
```

## 响应消息<a name="section102871038144014"></a>

**响应参数**

响应参数如[表10](#table159281347134112)所示。

**表 10**  响应参数

<a name="table159281347134112"></a>
<table><thead align="left"><tr id="row7929647204119"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p17646654423"><a name="p17646654423"></a><a name="p17646654423"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p15646165184218"><a name="p15646165184218"></a><a name="p15646165184218"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p1964615524219"><a name="p1964615524219"></a><a name="p1964615524219"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1892984724116"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p1864645194216"><a name="p1864645194216"></a><a name="p1864645194216"></a>errorCode</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p864615519427"><a name="p864615519427"></a><a name="p864615519427"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p166461359420"><a name="p166461359420"></a><a name="p166461359420"></a>响应码。</p>
</td>
</tr>
<tr id="row17929747194112"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p86483514420"><a name="p86483514420"></a><a name="p86483514420"></a>errorMessage</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p364813564216"><a name="p364813564216"></a><a name="p364813564216"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p1364875104213"><a name="p1364875104213"></a><a name="p1364875104213"></a>响应信息描述。</p>
</td>
</tr>
</tbody>
</table>

**响应示例**

```
{
     "errorCode":"SVCSTG.INV.2000000",
     "errorMessage":""
}
```

## 状态码<a name="section4762102174714"></a>

-   正常

    状态码如[表11](#table1581142134710)所示。


**表 11**  状态码

<a name="table1581142134710"></a>
<table><thead align="left"><tr id="row13810162111471"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p681012124715"><a name="p681012124715"></a><a name="p681012124715"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p7810122114479"><a name="p7810122114479"></a><a name="p7810122114479"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row48111121114712"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p38110218476"><a name="p38110218476"></a><a name="p38110218476"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p10811102154710"><a name="p10811102154710"></a><a name="p10811102154710"></a>查询警报成功。</p>
</td>
</tr>
</tbody>
</table>

-   异常

    状态码如[表12](#table28131021134718)所示。更多状态码请见[状态码](状态码.md)


**表 12**  状态码

<a name="table28131021134718"></a>
<table><thead align="left"><tr id="row188127212470"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p08121321174720"><a name="p08121321174720"></a><a name="p08121321174720"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p19812521124715"><a name="p19812521124715"></a><a name="p19812521124715"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row2813421144712"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p17537181217491"><a name="p17537181217491"></a><a name="p17537181217491"></a>400 Bad Request</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p155376128493"><a name="p155376128493"></a><a name="p155376128493"></a>请求错误。</p>
</td>
</tr>
<tr id="row181372164717"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p6537101204915"><a name="p6537101204915"></a><a name="p6537101204915"></a>401 Unauthorized</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p10537012204913"><a name="p10537012204913"></a><a name="p10537012204913"></a>未提供认证信息，或认证信息错。</p>
</td>
</tr>
<tr id="row138131821114719"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p125381612184917"><a name="p125381612184917"></a><a name="p125381612184917"></a>403 Forbidden</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p3538201220492"><a name="p3538201220492"></a><a name="p3538201220492"></a>请求页面被禁止访问。</p>
</td>
</tr>
<tr id="row1581318210476"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p14538151220497"><a name="p14538151220497"></a><a name="p14538151220497"></a>500 Internal Server Error</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p85381712114915"><a name="p85381712114915"></a><a name="p85381712114915"></a>请求未完成，服务异常。</p>
</td>
</tr>
<tr id="row78131021184710"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p253811129494"><a name="p253811129494"></a><a name="p253811129494"></a>503 Service Unavailable</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p19538131217492"><a name="p19538131217492"></a><a name="p19538131217492"></a>系统暂时不可用，请求受限。</p>
</td>
</tr>
</tbody>
</table>

## 错误码<a name="section19943111175114"></a>

**表 13**  错误码

<a name="table12981455105110"></a>
<table><thead align="left"><tr id="row1498135519512"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p209214273521"><a name="p209214273521"></a><a name="p209214273521"></a>错误码</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p1292102735217"><a name="p1292102735217"></a><a name="p1292102735217"></a>错误信息</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p6921427165215"><a name="p6921427165215"></a><a name="p6921427165215"></a>处理措施</p>
</th>
</tr>
</thead>
<tbody><tr id="row1698215553516"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p149292719526"><a name="p149292719526"></a><a name="p149292719526"></a>SVCSTG.INV.4030000</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p992142716525"><a name="p992142716525"></a><a name="p992142716525"></a>Forbidden</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p693102755210"><a name="p693102755210"></a><a name="p693102755210"></a>请更换有权限的账号。</p>
</td>
</tr>
<tr id="row1698295545111"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p139332711524"><a name="p139332711524"></a><a name="p139332711524"></a>SVCSTG.INV.4000115</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p179362785213"><a name="p179362785213"></a><a name="p179362785213"></a>Request param is invalid</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p199312745217"><a name="p199312745217"></a><a name="p199312745217"></a>请检查参数。</p>
</td>
</tr>
<tr id="row3982175510516"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p10931527195220"><a name="p10931527195220"></a><a name="p10931527195220"></a>SVCSTG.INV.5000002</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p14931127145213"><a name="p14931127145213"></a><a name="p14931127145213"></a>Elasticsearch execute exception</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p393132711528"><a name="p393132711528"></a><a name="p393132711528"></a>请联系管理员解决。</p>
</td>
</tr>
<tr id="row6983115555117"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p19472719526"><a name="p19472719526"></a><a name="p19472719526"></a>SVCSTG.INV.5000003</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p15942027135212"><a name="p15942027135212"></a><a name="p15942027135212"></a>Call icmgr exception</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p1794172718529"><a name="p1794172718529"></a><a name="p1794172718529"></a>请联系管理员解决。</p>
</td>
</tr>
<tr id="row12983955125115"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p594527125213"><a name="p594527125213"></a><a name="p594527125213"></a>SVCSTG.INV.5000001</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p109411277525"><a name="p109411277525"></a><a name="p109411277525"></a>Elasticsearch session is null</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p99432765212"><a name="p99432765212"></a><a name="p99432765212"></a>请联系管理员解决。</p>
</td>
</tr>
<tr id="row10983555165114"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p18941127115217"><a name="p18941127115217"></a><a name="p18941127115217"></a>SVCSTG.INV.5000006</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p19941327125216"><a name="p19941327125216"></a><a name="p19941327125216"></a>apprule name has existed</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p594142717520"><a name="p594142717520"></a><a name="p594142717520"></a>规则名称已存在。</p>
</td>
</tr>
<tr id="row1598435535110"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p109412795211"><a name="p109412795211"></a><a name="p109412795211"></a>SVCSTG.INV.5000007</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p129410279525"><a name="p129410279525"></a><a name="p129410279525"></a>The number of apprules has reached limit</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p8947274524"><a name="p8947274524"></a><a name="p8947274524"></a>规则数量已达到最大限制。</p>
</td>
</tr>
</tbody>
</table>

