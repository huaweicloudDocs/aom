# 更新策略<a name="ZH-CN_TOPIC_0130935539"></a>

## 功能说明<a name="section1498783173916"></a>

该接口用于修改策略规则。

>![](public_sys-resources/icon-notice.gif) **注意：**   
>告警策略支持更新，定时和周期策略不支持更新。  

## URI<a name="section2374173910"></a>

PUT  /v1/\{project\_id\}/pe/policy/\{policy\_id\}

参数说明请参见[表1](#table19631622134319)

**表 1**  参数说明

<a name="table19631622134319"></a>
<table><thead align="left"><tr id="row116319220439"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p4425845392"><a name="p4425845392"></a><a name="p4425845392"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p2425542393"><a name="p2425542393"></a><a name="p2425542393"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p542511416394"><a name="p542511416394"></a><a name="p542511416394"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row8631522104316"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p04252042399"><a name="p04252042399"></a><a name="p04252042399"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p164251143390"><a name="p164251143390"></a><a name="p164251143390"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p144251745396"><a name="p144251745396"></a><a name="p144251745396"></a>项目ID</p>
</td>
</tr>
<tr id="row14795227432"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p1942517416397"><a name="p1942517416397"></a><a name="p1942517416397"></a>policy_id</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1042504193917"><a name="p1042504193917"></a><a name="p1042504193917"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p04251403919"><a name="p04251403919"></a><a name="p04251403919"></a>策略ID</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="section1194413911"></a>

**请求消息头**

请求消息头如[表2](#table6686621210)

**表 2**  请求消息头

<a name="table6686621210"></a>
<table><thead align="left"><tr id="row2068616212218"><th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.1"><p id="p1917015141023"><a name="p1917015141023"></a><a name="p1917015141023"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.2"><p id="p018651416217"><a name="p018651416217"></a><a name="p018651416217"></a>描述</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.3"><p id="p101863141023"><a name="p101863141023"></a><a name="p101863141023"></a>是否为必选</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.5.1.4"><p id="p918619141324"><a name="p918619141324"></a><a name="p918619141324"></a>示例</p>
</th>
</tr>
</thead>
<tbody><tr id="row13686122127"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p2201151420213"><a name="p2201151420213"></a><a name="p2201151420213"></a>Content-Type</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p52015149215"><a name="p52015149215"></a><a name="p52015149215"></a>内容类型</p>
<p id="p7201914328"><a name="p7201914328"></a><a name="p7201914328"></a>该字段内容填为“application/json;charset=utf-8”</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p10201111411210"><a name="p10201111411210"></a><a name="p10201111411210"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p82019141228"><a name="p82019141228"></a><a name="p82019141228"></a>application/json;charset=utf-8</p>
</td>
</tr>
<tr id="row1868672625"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p2201214829"><a name="p2201214829"></a><a name="p2201214829"></a>Cluster-Id</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p16217214927"><a name="p16217214927"></a><a name="p16217214927"></a>集群ID</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p22178149220"><a name="p22178149220"></a><a name="p22178149220"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p8217121410217"><a name="p8217121410217"></a><a name="p8217121410217"></a>-</p>
</td>
</tr>
<tr id="row06862220212"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p1421710143218"><a name="p1421710143218"></a><a name="p1421710143218"></a>Namespace</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p12179142211"><a name="p12179142211"></a><a name="p12179142211"></a>命名空间</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p623212148218"><a name="p623212148218"></a><a name="p623212148218"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p1223241415211"><a name="p1223241415211"></a><a name="p1223241415211"></a>-</p>
</td>
</tr>
<tr id="row14686021822"><td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.1 "><p id="p623216147212"><a name="p623216147212"></a><a name="p623216147212"></a>Deployment-Name</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.2 "><p id="p8232191419213"><a name="p8232191419213"></a><a name="p8232191419213"></a>应用名</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.3 "><p id="p1723221413210"><a name="p1723221413210"></a><a name="p1723221413210"></a>必选</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.5.1.4 "><p id="p132497144215"><a name="p132497144215"></a><a name="p132497144215"></a>-</p>
</td>
</tr>
</tbody>
</table>

**请求参数**

请求参数如[表3](#table87626163318)

**表 3**  请求参数

<a name="table87626163318"></a>
<table><thead align="left"><tr id="row1676231612320"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p174258415396"><a name="p174258415396"></a><a name="p174258415396"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p134251946397"><a name="p134251946397"></a><a name="p134251946397"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p1242519423915"><a name="p1242519423915"></a><a name="p1242519423915"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p3425194123911"><a name="p3425194123911"></a><a name="p3425194123911"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p20425184153912"><a name="p20425184153912"></a><a name="p20425184153912"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row276215161032"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p84251944399"><a name="p84251944399"></a><a name="p84251944399"></a>id</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p342517413915"><a name="p342517413915"></a><a name="p342517413915"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p184254416395"><a name="p184254416395"></a><a name="p184254416395"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p14425184163918"><a name="p14425184163918"></a><a name="p14425184163918"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p8425642394"><a name="p8425642394"></a><a name="p8425642394"></a>策略ID</p>
</td>
</tr>
<tr id="row47621316331"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p9425154113912"><a name="p9425154113912"></a><a name="p9425154113912"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p442517411393"><a name="p442517411393"></a><a name="p442517411393"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1442517433914"><a name="p1442517433914"></a><a name="p1442517433914"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p24251841391"><a name="p24251841391"></a><a name="p24251841391"></a>策略名称必须为以0～9、a～z、A～Z、下划线（_）或中划线（-）组成的1~64位字符串，且必须以字母开头。</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p1342594193912"><a name="p1342594193912"></a><a name="p1342594193912"></a>策略名称（不支持修改）</p>
</td>
</tr>
<tr id="row07621216339"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p242594133916"><a name="p242594133916"></a><a name="p242594133916"></a>policy_type</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p184252414391"><a name="p184252414391"></a><a name="p184252414391"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1642514173913"><a name="p1642514173913"></a><a name="p1642514173913"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p14374112154618"><a name="p14374112154618"></a><a name="p14374112154618"></a>告警策略：ALARM</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p14251944394"><a name="p14251944394"></a><a name="p14251944394"></a>策略类型(当前只支持告警策略)</p>
</td>
</tr>
<tr id="row1876217161839"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p124251041393"><a name="p124251041393"></a><a name="p124251041393"></a>rule</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p1342564143919"><a name="p1342564143919"></a><a name="p1342564143919"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p74255412395"><a name="p74255412395"></a><a name="p74255412395"></a>参见<a href="#ZH-CN_TOPIC_0130935539__table270954342">表4</a></p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p842519410393"><a name="p842519410393"></a><a name="p842519410393"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p1242514414390"><a name="p1242514414390"></a><a name="p1242514414390"></a>触发策略的规则</p>
</td>
</tr>
</tbody>
</table>

**表 4**  rule字段数据结构说明

<a name="table270954342"></a>
<table><thead align="left"><tr id="row12709641147"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p4425547394"><a name="p4425547394"></a><a name="p4425547394"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p942584173912"><a name="p942584173912"></a><a name="p942584173912"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p042534123916"><a name="p042534123916"></a><a name="p042534123916"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p114258414399"><a name="p114258414399"></a><a name="p114258414399"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p184251414393"><a name="p184251414393"></a><a name="p184251414393"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1070964945"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1942519473914"><a name="p1942519473914"></a><a name="p1942519473914"></a>conditions</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p0425141397"><a name="p0425141397"></a><a name="p0425141397"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p184252417394"><a name="p184252417394"></a><a name="p184252417394"></a>参见<a href="#ZH-CN_TOPIC_0130935539__table1418220521952">表5</a></p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p1742514403918"><a name="p1742514403918"></a><a name="p1742514403918"></a>conditions最多5个，最少1个</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p1642516453916"><a name="p1642516453916"></a><a name="p1642516453916"></a>匹配条件内容。一个规则可以有多个条件，多个条件之间的关系是“并且”，内部描述了多个详细匹配条件。一个条件可以描述一个metric的匹配方式。</p>
</td>
</tr>
<tr id="row157091341245"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1642524133916"><a name="p1642524133916"></a><a name="p1642524133916"></a>actions</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p13425541398"><a name="p13425541398"></a><a name="p13425541398"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p9425104163919"><a name="p9425104163919"></a><a name="p9425104163919"></a>参见<a href="#ZH-CN_TOPIC_0130935539__table69131616271">表6</a></p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p242518410397"><a name="p242518410397"></a><a name="p242518410397"></a>actions最多5个，最少1个</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p942517411393"><a name="p942517411393"></a><a name="p942517411393"></a>指定策略匹配成功后执行的动作。</p>
</td>
</tr>
</tbody>
</table>

**表 5**  conditions字段数据结构说明

<a name="table1418220521952"></a>
<table><thead align="left"><tr id="row1318213521458"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p724517154611"><a name="p724517154611"></a><a name="p724517154611"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p182601815069"><a name="p182601815069"></a><a name="p182601815069"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p1126017152062"><a name="p1126017152062"></a><a name="p1126017152062"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p42601155614"><a name="p42601155614"></a><a name="p42601155614"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p192602157610"><a name="p192602157610"></a><a name="p192602157610"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row171821052851"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1627716158619"><a name="p1627716158619"></a><a name="p1627716158619"></a>metric_namespace</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p172770152061"><a name="p172770152061"></a><a name="p172770152061"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p11277191511614"><a name="p11277191511614"></a><a name="p11277191511614"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><a name="ul1277415762"></a><a name="ul1277415762"></a><ul id="ul1277415762"><li>PAAS.CONTAINER应用指标的命名空间</li><li>PAAS.CUSTOMMETRICS：自定义指标的命名空间</li></ul>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p192925151869"><a name="p192925151869"></a><a name="p192925151869"></a>指标命名空间</p>
</td>
</tr>
<tr id="row1618255218516"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p7292141515616"><a name="p7292141515616"></a><a name="p7292141515616"></a>metric_name</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p92927151969"><a name="p92927151969"></a><a name="p92927151969"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p7307181517617"><a name="p7307181517617"></a><a name="p7307181517617"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p1930721514619"><a name="p1930721514619"></a><a name="p1930721514619"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p1830717151768"><a name="p1830717151768"></a><a name="p1830717151768"></a>指标名称</p>
</td>
</tr>
<tr id="row218295219517"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p330712151166"><a name="p330712151166"></a><a name="p330712151166"></a>metric_unit</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p10324415966"><a name="p10324415966"></a><a name="p10324415966"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p4324715063"><a name="p4324715063"></a><a name="p4324715063"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p10324121516611"><a name="p10324121516611"></a><a name="p10324121516611"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p6324171517612"><a name="p6324171517612"></a><a name="p6324171517612"></a>单位</p>
<div class="note" id="note032411510617"><a name="note032411510617"></a><a name="note032411510617"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p0338101519613"><a name="p0338101519613"></a><a name="p0338101519613"></a>随指标名称变化而变化，具体信息从AMS接口获取</p>
</div></div>
</td>
</tr>
<tr id="row121829521858"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1433871515616"><a name="p1433871515616"></a><a name="p1433871515616"></a>period</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p833818151167"><a name="p833818151167"></a><a name="p833818151167"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p1233812151461"><a name="p1233812151461"></a><a name="p1233812151461"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p183387151863"><a name="p183387151863"></a><a name="p183387151863"></a>分别包括20，60，300，900，1800，3600</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p73546157610"><a name="p73546157610"></a><a name="p73546157610"></a>统计周期，单位：秒</p>
</td>
</tr>
<tr id="row181827521513"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p123541015766"><a name="p123541015766"></a><a name="p123541015766"></a>evaluation_periods</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p1235410151568"><a name="p1235410151568"></a><a name="p1235410151568"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p123546156618"><a name="p123546156618"></a><a name="p123546156618"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p13354131517612"><a name="p13354131517612"></a><a name="p13354131517612"></a>1，2，3，4，5</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p3369215867"><a name="p3369215867"></a><a name="p3369215867"></a>连续周期数</p>
</td>
</tr>
<tr id="row1118215521853"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p103699153617"><a name="p103699153617"></a><a name="p103699153617"></a>statistic</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p936914158613"><a name="p936914158613"></a><a name="p936914158613"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p143697151869"><a name="p143697151869"></a><a name="p143697151869"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p16369615063"><a name="p16369615063"></a><a name="p16369615063"></a>当前只支持平均值（average）</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p838551510611"><a name="p838551510611"></a><a name="p838551510611"></a>统计方式</p>
</td>
</tr>
<tr id="row818225215516"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p1238514151615"><a name="p1238514151615"></a><a name="p1238514151615"></a>metric_operation</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p33851915563"><a name="p33851915563"></a><a name="p33851915563"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p03851515763"><a name="p03851515763"></a><a name="p03851515763"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p194013153616"><a name="p194013153616"></a><a name="p194013153616"></a>包含“&gt;”、“&lt;”。</p>
<p id="p24011815368"><a name="p24011815368"></a><a name="p24011815368"></a>例如，“&gt;”表示当metric大于metric_thresholdUpdate值时触发actions</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p9401131512620"><a name="p9401131512620"></a><a name="p9401131512620"></a>指标操作符</p>
</td>
</tr>
<tr id="row3182252653"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p34016159619"><a name="p34016159619"></a><a name="p34016159619"></a>metric_threshold</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p144011215763"><a name="p144011215763"></a><a name="p144011215763"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p4401315965"><a name="p4401315965"></a><a name="p4401315965"></a>float64</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p1641716158620"><a name="p1641716158620"></a><a name="p1641716158620"></a>[0，2147483647]</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p194171115566"><a name="p194171115566"></a><a name="p194171115566"></a>阈值条件</p>
</td>
</tr>
</tbody>
</table>

**表 6**  actions字段数据结构说明

<a name="table69131616271"></a>
<table><thead align="left"><tr id="row39131516570"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p64251941399"><a name="p64251941399"></a><a name="p64251941399"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p542510419397"><a name="p542510419397"></a><a name="p542510419397"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p642544193914"><a name="p642544193914"></a><a name="p642544193914"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p042544143916"><a name="p042544143916"></a><a name="p042544143916"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p1842517418394"><a name="p1842517418394"></a><a name="p1842517418394"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row159131016278"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p184251045395"><a name="p184251045395"></a><a name="p184251045395"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p6425640397"><a name="p6425640397"></a><a name="p6425640397"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p164251745390"><a name="p164251745390"></a><a name="p164251745390"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><a name="ul842512412393"></a><a name="ul842512412393"></a><ul id="ul842512412393"><li>scale_out_k8s</li><li>scale_out_vm</li><li>scale_in_k8s</li><li>scale_in_vm</li></ul>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><a name="ul17425946396"></a><a name="ul17425946396"></a><ul id="ul17425946396"><li>scale_out_k8s、scale_out_vm表示扩容。</li><li>scale_in_k8s、scale_in_vm表示缩容。</li></ul>
<div class="note" id="note131128413914"><a name="note131128413914"></a><a name="note131128413914"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p164253412392"><a name="p164253412392"></a><a name="p164253412392"></a>含有k8s的表示容器应用，含有vm的表示进程应用。</p>
</div></div>
</td>
</tr>
<tr id="row59132016271"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p204259416396"><a name="p204259416396"></a><a name="p204259416396"></a>parameters</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p842514413914"><a name="p842514413914"></a><a name="p842514413914"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p184251544395"><a name="p184251544395"></a><a name="p184251544395"></a>参见<a href="#ZH-CN_TOPIC_0130935539__table101917377714">表7</a></p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p04251549399"><a name="p04251549399"></a><a name="p04251549399"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p16425846392"><a name="p16425846392"></a><a name="p16425846392"></a>包含扩缩容的实例数。</p>
</td>
</tr>
</tbody>
</table>

**表 7**  parameters字段数据结构说明

<a name="table101917377714"></a>
<table><thead align="left"><tr id="row181915374715"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.1"><p id="p16425184103914"><a name="p16425184103914"></a><a name="p16425184103914"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.2"><p id="p174259473913"><a name="p174259473913"></a><a name="p174259473913"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.3"><p id="p1442574153911"><a name="p1442574153911"></a><a name="p1442574153911"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.4"><p id="p84251413911"><a name="p84251413911"></a><a name="p84251413911"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.6.1.5"><p id="p16425747398"><a name="p16425747398"></a><a name="p16425747398"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row141911378710"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.1 "><p id="p442516416392"><a name="p442516416392"></a><a name="p442516416392"></a>scale_unit</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.2 "><p id="p2425245397"><a name="p2425245397"></a><a name="p2425245397"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.3 "><p id="p14256473912"><a name="p14256473912"></a><a name="p14256473912"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.4 "><p id="p04253433912"><a name="p04253433912"></a><a name="p04253433912"></a>在策略组的最小实例数与最大实例数之间</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.6.1.5 "><p id="p9425154103910"><a name="p9425154103910"></a><a name="p9425154103910"></a>扩缩容的实例数</p>
</td>
</tr>
</tbody>
</table>

**请求示例**

修改告警策略示例

```
{   
    "id" : "5c2eecea-32ac-42c0-be30-f73b15d68429", 
    "name" : "policy_1", 
    "policy_type" : "ALARM", 
    "rule" : { 
        "conditions" : [{ 
                "metric_namespace" : "PAAS.CONTAINER", 
                "metric_name" : "cpuUsage", 
                "metric_unit" : "Percent", 
                "period" : 60, 
                "evaluation_periods" : 1, 
                "statistic" : "average", 
                "metric_operation" : ">", 
                "metric_threshold" : 70 
            } 
        ], 
        "actions" : [{ 
                "type" : "scale_out_k8s", 
                "parameters" : { 
                    "scale_unit" : 1 
                } 
            } 
        ] 
    } 
}
```

## 响应消息<a name="section1712714416397"></a>

**响应参数**

响应参数如[表8](#table845954812114)

**表 8**  响应参数

<a name="table845954812114"></a>
<table><thead align="left"><tr id="row245924811111"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p154251049395"><a name="p154251049395"></a><a name="p154251049395"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p114251941391"><a name="p114251941391"></a><a name="p114251941391"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p94258423911"><a name="p94258423911"></a><a name="p94258423911"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row94592484119"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p24251453915"><a name="p24251453915"></a><a name="p24251453915"></a>errorCode</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p842564103911"><a name="p842564103911"></a><a name="p842564103911"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p12425242395"><a name="p12425242395"></a><a name="p12425242395"></a>错误码</p>
</td>
</tr>
<tr id="row14591248191111"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p13425148398"><a name="p13425148398"></a><a name="p13425148398"></a>errorMessage</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p542514433912"><a name="p542514433912"></a><a name="p542514433912"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p2042514193914"><a name="p2042514193914"></a><a name="p2042514193914"></a>详细信息</p>
</td>
</tr>
<tr id="row945954818119"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p16425243395"><a name="p16425243395"></a><a name="p16425243395"></a>context</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p17425194113912"><a name="p17425194113912"></a><a name="p17425194113912"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p154251745394"><a name="p154251745394"></a><a name="p154251745394"></a>修改后策略的详细信息</p>
</td>
</tr>
</tbody>
</table>

**响应示例**

```
{
   "errorCode": 0,  
   "errorMessage": ""
   "context": { 
        "id" : "5c2eecea-32ac-42c0-be30-f73b15d68429", 
        "name" : "policy_1", 
        "policy_type" : "ALARM", 
        "rule" : { 
            "conditions" : [{ 
                    "metric_namespace" : "PAAS.CONTAINER", 
                    "metric_name" : "cpuUsage", 
                    "metric_unit" : "Percent", 
                    "period" : 60, 
                    "evaluation_periods" : 1, 
                    "statistic" : "average", 
                    "metric_operation" : ">", 
                    "metric_threshold" : 70 
                } 
            ], 
            "actions" : [{ 
                    "type" : "scale_out_k8s", 
                    "parameters" : { 
                        "scale_unit" : 1 
                    }   
                } 
            ] 
        } 
    } 
}
```

## 错误码<a name="section020382392113"></a>

**表 9**  错误码

<a name="table1224552382117"></a>
<table><thead align="left"><tr id="row16243112316213"><th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.1"><p id="p524317236215"><a name="p524317236215"></a><a name="p524317236215"></a>错误码</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.2"><p id="p16243132392111"><a name="p16243132392111"></a><a name="p16243132392111"></a>错误信息</p>
</th>
<th class="cellrowborder" valign="top" width="33.333333333333336%" id="mcps1.2.4.1.3"><p id="p14243172315215"><a name="p14243172315215"></a><a name="p14243172315215"></a>处理措施</p>
</th>
</tr>
</thead>
<tbody><tr id="row1249293522014"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p11928134453317"><a name="p11928134453317"></a><a name="p11928134453317"></a>SVCSTG.PE.4001101</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p10928114417334"><a name="p10928114417334"></a><a name="p10928114417334"></a>参数不合法。</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p4928104403319"><a name="p4928104403319"></a><a name="p4928104403319"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row106178333181"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p3928104419336"><a name="p3928104419336"></a><a name="p3928104419336"></a>SVCSTG.PE.4031012</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p49301744163319"><a name="p49301744163319"></a><a name="p49301744163319"></a>ProjectId校验失败。</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p8930114473311"><a name="p8930114473311"></a><a name="p8930114473311"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row1541031112212"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p792864413313"><a name="p792864413313"></a><a name="p792864413313"></a>SVCSTG.PE.4033008</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p792874453315"><a name="p792874453315"></a><a name="p792874453315"></a>定时策略或周期策略不能更新。</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p18928174413330"><a name="p18928174413330"></a><a name="p18928174413330"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row197462811334"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p9274158133415"><a name="p9274158133415"></a><a name="p9274158133415"></a>SVCSTG.PE.5001201</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p42741783340"><a name="p42741783340"></a><a name="p42741783340"></a>后台插入或更新数据失败。</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p427498203411"><a name="p427498203411"></a><a name="p427498203411"></a>请联系管理员解决。</p>
</td>
</tr>
<tr id="row14573615333"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p18706191418348"><a name="p18706191418348"></a><a name="p18706191418348"></a>SVCSTG.PE.5001203</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p207061214123417"><a name="p207061214123417"></a><a name="p207061214123417"></a>后台查询异常。</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p670661413417"><a name="p670661413417"></a><a name="p670661413417"></a>请联系管理员解决。</p>
</td>
</tr>
<tr id="row2030614412338"><td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.1 "><p id="p113621913344"><a name="p113621913344"></a><a name="p113621913344"></a>SVCSTG.PE.5003007</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.2 "><p id="p1913621917347"><a name="p1913621917347"></a><a name="p1913621917347"></a>更新阈值规则失败。</p>
</td>
<td class="cellrowborder" valign="top" width="33.333333333333336%" headers="mcps1.2.4.1.3 "><p id="p91364196349"><a name="p91364196349"></a><a name="p91364196349"></a>请联系管理员解决。</p>
</td>
</tr>
</tbody>
</table>

