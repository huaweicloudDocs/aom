# 查询日志<a name="ZH-CN_TOPIC_0137629939"></a>

## 功能介绍<a name="section13566355"></a>

该接口用于查询不同维度（例如，集群、IP、应用等）下的日志内容。

## URI<a name="section54988338"></a>

POST  /v1/\{project\_id\}/als/action?type=querylogs

参数说明请参见[表1](#table186473594509)。

**表 1**  参数说明

<a name="table186473594509"></a>
<table><thead align="left"><tr id="row50373246"><th class="cellrowborder" valign="top" width="32.65%" id="mcps1.2.4.1.1"><p id="p53701151"><a name="p53701151"></a><a name="p53701151"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="24.490000000000002%" id="mcps1.2.4.1.2"><p id="p54826013"><a name="p54826013"></a><a name="p54826013"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="42.86%" id="mcps1.2.4.1.3"><p id="p11722079"><a name="p11722079"></a><a name="p11722079"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row9964366"><td class="cellrowborder" valign="top" width="32.65%" headers="mcps1.2.4.1.1 "><p id="p1807313"><a name="p1807313"></a><a name="p1807313"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="24.490000000000002%" headers="mcps1.2.4.1.2 "><p id="p12174673"><a name="p12174673"></a><a name="p12174673"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="42.86%" headers="mcps1.2.4.1.3 "><p id="p46624437"><a name="p46624437"></a><a name="p46624437"></a>租户从IAM申请到的projectid，一般为32位字符串。</p>
</td>
</tr>
<tr id="row16966752"><td class="cellrowborder" valign="top" width="32.65%" headers="mcps1.2.4.1.1 "><p id="p32129686"><a name="p32129686"></a><a name="p32129686"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="24.490000000000002%" headers="mcps1.2.4.1.2 "><p id="p52367780"><a name="p52367780"></a><a name="p52367780"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="42.86%" headers="mcps1.2.4.1.3 "><p id="p13931827"><a name="p13931827"></a><a name="p13931827"></a>日志接口调用方式，当值为"querylogs"时，接口功能为查询日志内容。</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="section25133000"></a>

**请求参数**

请求参数如[表2](#table1221212122718)所示。

**表 2**  请求参数

<a name="table1221212122718"></a>
<table><thead align="left"><tr id="row62039823"><th class="cellrowborder" valign="top" width="19.79%" id="mcps1.2.6.1.1"><p id="p59169766"><a name="p59169766"></a><a name="p59169766"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="12.5%" id="mcps1.2.6.1.2"><p id="p28021733"><a name="p28021733"></a><a name="p28021733"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="17.71%" id="mcps1.2.6.1.3"><p id="p55167925"><a name="p55167925"></a><a name="p55167925"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.6.1.4"><p id="p39416958"><a name="p39416958"></a><a name="p39416958"></a>取值范围</p>
</th>
<th class="cellrowborder" valign="top" width="25%" id="mcps1.2.6.1.5"><p id="p38656999"><a name="p38656999"></a><a name="p38656999"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row39993016572"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p1299412435303"><a name="p1299412435303"></a><a name="p1299412435303"></a>Condition</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p502165718"><a name="p502165718"></a><a name="p502165718"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p160215573"><a name="p160215573"></a><a name="p160215573"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p9193141513317"><a name="p9193141513317"></a><a name="p9193141513317"></a>{</p>
<p id="p13193191510317"><a name="p13193191510317"></a><a name="p13193191510317"></a>"category": "app_*",</p>
<p id="p1219312159313"><a name="p1219312159313"></a><a name="p1219312159313"></a>"searchKey":</p>
<p id="p11193171516313"><a name="p11193171516313"></a><a name="p11193171516313"></a>{</p>
<p id="p1175012181463"><a name="p1175012181463"></a><a name="p1175012181463"></a>"clusterId": "c693fa7c-54cd-11e8-8055-0255ac101e40",</p>
<p id="p1139134513212"><a name="p1139134513212"></a><a name="p1139134513212"></a>"nameSpace": "",</p>
<p id="p18193131543119"><a name="p18193131543119"></a><a name="p18193131543119"></a>"appName": "",</p>
<p id="p161931815143111"><a name="p161931815143111"></a><a name="p161931815143111"></a>"podName": "",</p>
<p id="p1919351514318"><a name="p1919351514318"></a><a name="p1919351514318"></a>"pathFile": "",</p>
<p id="p2193141543116"><a name="p2193141543116"></a><a name="p2193141543116"></a>"hostIP":""</p>
<p id="p4193141583114"><a name="p4193141583114"></a><a name="p4193141583114"></a>},</p>
<p id="p12193121511313"><a name="p12193121511313"></a><a name="p12193121511313"></a>"keyWord": "",</p>
<p id="p619311151314"><a name="p619311151314"></a><a name="p619311151314"></a>"startTime": 1538970064983,</p>
<p id="p17193115123114"><a name="p17193115123114"></a><a name="p17193115123114"></a>"endTime": 1538970364983,</p>
<p id="p19193215153119"><a name="p19193215153119"></a><a name="p19193215153119"></a>"hideSyslog": 0</p>
<p id="p1319315151316"><a name="p1319315151316"></a><a name="p1319315151316"></a>}</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p1051714356316"><a name="p1051714356316"></a><a name="p1051714356316"></a>该参数需要在调用时，放在请求body中，为JSON字符串。</p>
</td>
</tr>
<tr id="row44209176"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p24173498"><a name="p24173498"></a><a name="p24173498"></a>category</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p11896308"><a name="p11896308"></a><a name="p11896308"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p24076911"><a name="p24076911"></a><a name="p24076911"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p4072787"><a name="p4072787"></a><a name="p4072787"></a>app_log,node_log,custom_log</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p0203560257"><a name="p0203560257"></a><a name="p0203560257"></a>日志类型字段：</p>
<a name="ul11850122832418"></a><a name="ul11850122832418"></a><ul id="ul11850122832418"><li>app_log：应用日志</li><li>node_log：主机日志</li><li>custom_log：自定义配置路径日志</li></ul>
</td>
</tr>
<tr id="row16271742"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p42942734"><a name="p42942734"></a><a name="p42942734"></a>searchKey</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p55809410"><a name="p55809410"></a><a name="p55809410"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p24268355"><a name="p24268355"></a><a name="p24268355"></a>JSONSring</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p19579704"><a name="p19579704"></a><a name="p19579704"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p975214717378"><a name="p975214717378"></a><a name="p975214717378"></a>日志过滤条件集合，不同日志来源所需字段不同。</p>
</td>
</tr>
<tr id="row10445536"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p40782072"><a name="p40782072"></a><a name="p40782072"></a>clusterId</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p15013512"><a name="p15013512"></a><a name="p15013512"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p8134969"><a name="p8134969"></a><a name="p8134969"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p54952754"><a name="p54952754"></a><a name="p54952754"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p21988124"><a name="p21988124"></a><a name="p21988124"></a>CCE集群ID。</p>
</td>
</tr>
<tr id="row63675395"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p57433369"><a name="p57433369"></a><a name="p57433369"></a>nameSpace</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p221318121712"><a name="p221318121712"></a><a name="p221318121712"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p4063481"><a name="p4063481"></a><a name="p4063481"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p60706581"><a name="p60706581"></a><a name="p60706581"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p1218016103391"><a name="p1218016103391"></a><a name="p1218016103391"></a>CCE容器集群的命名空间。</p>
</td>
</tr>
<tr id="row7126123018396"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p1112673011393"><a name="p1112673011393"></a><a name="p1112673011393"></a>appName</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p12126163073911"><a name="p12126163073911"></a><a name="p12126163073911"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p1712620307398"><a name="p1712620307398"></a><a name="p1712620307398"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p10126193013395"><a name="p10126193013395"></a><a name="p10126193013395"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p101261430103919"><a name="p101261430103919"></a><a name="p101261430103919"></a>服务名称。</p>
</td>
</tr>
<tr id="row11669912407"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p116614918408"><a name="p116614918408"></a><a name="p116614918408"></a>podName</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p3166179144014"><a name="p3166179144014"></a><a name="p3166179144014"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p10166149144013"><a name="p10166149144013"></a><a name="p10166149144013"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p21662914013"><a name="p21662914013"></a><a name="p21662914013"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p121668911403"><a name="p121668911403"></a><a name="p121668911403"></a>容器实例名称。</p>
</td>
</tr>
<tr id="row185152511417"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p105192514416"><a name="p105192514416"></a><a name="p105192514416"></a>pathFile</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p45152544111"><a name="p45152544111"></a><a name="p45152544111"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p165132594115"><a name="p165132594115"></a><a name="p165132594115"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p105142519417"><a name="p105142519417"></a><a name="p105142519417"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p18516254410"><a name="p18516254410"></a><a name="p18516254410"></a>日志文件名称。</p>
</td>
</tr>
<tr id="row1096927144620"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p1097011714611"><a name="p1097011714611"></a><a name="p1097011714611"></a>hostIP</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p297007154618"><a name="p297007154618"></a><a name="p297007154618"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p1197016714468"><a name="p1197016714468"></a><a name="p1197016714468"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p197016711464"><a name="p197016711464"></a><a name="p197016711464"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p139708714613"><a name="p139708714613"></a><a name="p139708714613"></a>日志所在虚拟机IP。</p>
</td>
</tr>
<tr id="row142102345416"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p9422162312547"><a name="p9422162312547"></a><a name="p9422162312547"></a>keyWord</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p1542262318548"><a name="p1542262318548"></a><a name="p1542262318548"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p6422102319542"><a name="p6422102319542"></a><a name="p6422102319542"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p98063212572"><a name="p98063212572"></a><a name="p98063212572"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><a name="ol105389351285"></a><a name="ol105389351285"></a><ol id="ol105389351285"><li>支持关键词精确搜索。关键词指相邻两个分词符之间的单词。</li><li>支持关键词模糊匹配搜索，例如输入“RROR”或“ERRO?”或“*ROR*”或“ERR*”或“ER*OR”。</li><li>支持短语精确搜索，例如输入“Start to refresh alm Statistic”。</li><li>支持关键词的“与”、“或”组合搜索。格式为“query&amp;&amp;logs”或“query||logs”。</li></ol>
<div class="note" id="note129391956144510"><a name="note129391956144510"></a><a name="note129391956144510"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p189411013460"><a name="p189411013460"></a><a name="p189411013460"></a>当前默认分词符有</p>
<p id="p1289416014612"><a name="p1289416014612"></a><a name="p1289416014612"></a>, '";=()[]{}@&amp;&lt;&gt;/:\n\t\r</p>
</div></div>
</td>
</tr>
<tr id="row12146155617572"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p18146356195711"><a name="p18146356195711"></a><a name="p18146356195711"></a>startTime</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p314616560575"><a name="p314616560575"></a><a name="p314616560575"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p4146656135710"><a name="p4146656135710"></a><a name="p4146656135710"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p1414616569570"><a name="p1414616569570"></a><a name="p1414616569570"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p18146175665710"><a name="p18146175665710"></a><a name="p18146175665710"></a>搜索起始时间（UTC时间，毫秒级）。</p>
</td>
</tr>
<tr id="row143411728205920"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p1334162835913"><a name="p1334162835913"></a><a name="p1334162835913"></a>endTime</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p63411828185915"><a name="p63411828185915"></a><a name="p63411828185915"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p103411028205920"><a name="p103411028205920"></a><a name="p103411028205920"></a>Long</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p20341122855910"><a name="p20341122855910"></a><a name="p20341122855910"></a>-</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p193411828125917"><a name="p193411828125917"></a><a name="p193411828125917"></a>搜索结束时间（UTC时间，毫秒级）。</p>
</td>
</tr>
<tr id="row21791050175919"><td class="cellrowborder" valign="top" width="19.79%" headers="mcps1.2.6.1.1 "><p id="p11801506593"><a name="p11801506593"></a><a name="p11801506593"></a>hideSyslog</p>
</td>
<td class="cellrowborder" valign="top" width="12.5%" headers="mcps1.2.6.1.2 "><p id="p101801250195918"><a name="p101801250195918"></a><a name="p101801250195918"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="17.71%" headers="mcps1.2.6.1.3 "><p id="p15180165035912"><a name="p15180165035912"></a><a name="p15180165035912"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.4 "><p id="p3180175011598"><a name="p3180175011598"></a><a name="p3180175011598"></a>0、1</p>
</td>
<td class="cellrowborder" valign="top" width="25%" headers="mcps1.2.6.1.5 "><p id="p1418095055916"><a name="p1418095055916"></a><a name="p1418095055916"></a>搜索时是否隐藏系统日志（icagent\kubectl），默认0为隐藏，1为显示。</p>
</td>
</tr>
</tbody>
</table>

**Header说明**

请求消息头（Header）如[表3](#table17428844137)所示。

**表 3**  Header说明

<a name="table17428844137"></a>
<table><thead align="left"><tr id="row1542824171318"><th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.1"><p id="p18428241134"><a name="p18428241134"></a><a name="p18428241134"></a>名称</p>
</th>
<th class="cellrowborder" valign="top" width="20%" id="mcps1.2.4.1.2"><p id="p1142819412139"><a name="p1142819412139"></a><a name="p1142819412139"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p1742816441311"><a name="p1742816441311"></a><a name="p1742816441311"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row1942834191319"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p166451516193818"><a name="p166451516193818"></a><a name="p166451516193818"></a>X-Auth-Token</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p464591643812"><a name="p464591643812"></a><a name="p464591643812"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p156451416173813"><a name="p156451416173813"></a><a name="p156451416173813"></a>从IAM服务获取的用户Token。</p>
</td>
</tr>
<tr id="row2428124181313"><td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.1 "><p id="p464641619384"><a name="p464641619384"></a><a name="p464641619384"></a>Content-Type</p>
</td>
<td class="cellrowborder" valign="top" width="20%" headers="mcps1.2.4.1.2 "><p id="p464631663813"><a name="p464631663813"></a><a name="p464631663813"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><p id="p1464691683810"><a name="p1464691683810"></a><a name="p1464691683810"></a>指定类型为application/json。</p>
</td>
</tr>
</tbody>
</table>

**请求示例**

示例1（查询集群下的应用日志）

```
/v1/{project_id}/als/action?type=querylogs
{  
    "category": "app_log",    
    "searchKey": 
              {
                "clusterId": "c693fa7c-54cd-11e8-8055-0255ac101e40"
              },
    "keyWord": "",
    "startTime": 1538970064983,
    "endTime": 1538970364983,
    "hideSyslog": 0
}
```

## 响应消息<a name="section24870414"></a>

**响应参数**

响应参数如[表4](#table6943113915268)所示。

**表 4**  响应参数

<a name="table6943113915268"></a>
<table><thead align="left"><tr id="row49770795"><th class="cellrowborder" valign="top" width="29.592959295929592%" id="mcps1.2.4.1.1"><p id="p4902603"><a name="p4902603"></a><a name="p4902603"></a>参数名称</p>
</th>
<th class="cellrowborder" valign="top" width="36.733673367336735%" id="mcps1.2.4.1.2"><p id="p61566543"><a name="p61566543"></a><a name="p61566543"></a>类型</p>
</th>
<th class="cellrowborder" valign="top" width="33.673367336733676%" id="mcps1.2.4.1.3"><p id="p20834080"><a name="p20834080"></a><a name="p20834080"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row9838885"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p58752198"><a name="p58752198"></a><a name="p58752198"></a>errorCode</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p61307629"><a name="p61307629"></a><a name="p61307629"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p66970879"><a name="p66970879"></a><a name="p66970879"></a>响应码，SVCSTG_AMS_2000000代表正常返回。</p>
</td>
</tr>
<tr id="row65867005"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p33627165"><a name="p33627165"></a><a name="p33627165"></a>errorMessage</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p39445854"><a name="p39445854"></a><a name="p39445854"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p40997607"><a name="p40997607"></a><a name="p40997607"></a>响应信息描述。</p>
</td>
</tr>
<tr id="row33434151"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p23811696"><a name="p23811696"></a><a name="p23811696"></a>result</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p49699222"><a name="p49699222"></a><a name="p49699222"></a>JSON对象</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p66214016"><a name="p66214016"></a><a name="p66214016"></a>查询结果元数据信息，包括返回总数及结果。</p>
</td>
</tr>
<tr id="row59055234"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p1868192261714"><a name="p1868192261714"></a><a name="p1868192261714"></a>total</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p41922002"><a name="p41922002"></a><a name="p41922002"></a>int</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p40239031"><a name="p40239031"></a><a name="p40239031"></a>当前返回结果条数。</p>
</td>
</tr>
<tr id="row26606965"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p94031733161720"><a name="p94031733161720"></a><a name="p94031733161720"></a>data</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p18148059"><a name="p18148059"></a><a name="p18148059"></a>JSON数组</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p60706693"><a name="p60706693"></a><a name="p60706693"></a>数据数组。</p>
</td>
</tr>
<tr id="row9489328"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p102531113131816"><a name="p102531113131816"></a><a name="p102531113131816"></a>category</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p49566655"><a name="p49566655"></a><a name="p49566655"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p55476136"><a name="p55476136"></a><a name="p55476136"></a>日志类型。</p>
</td>
</tr>
<tr id="row29523177"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p036982911812"><a name="p036982911812"></a><a name="p036982911812"></a>loghash</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p25382805"><a name="p25382805"></a><a name="p25382805"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p42741350"><a name="p42741350"></a><a name="p42741350"></a>日志来源HASH值。</p>
</td>
</tr>
<tr id="row49127838"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p19931961"><a name="p19931961"></a><a name="p19931961"></a>clusterId</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p3876157"><a name="p3876157"></a><a name="p3876157"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p45533264"><a name="p45533264"></a><a name="p45533264"></a>CCE集群ID。</p>
</td>
</tr>
<tr id="row7146200"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p41971336"><a name="p41971336"></a><a name="p41971336"></a>clusterName</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p44235036"><a name="p44235036"></a><a name="p44235036"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p26268157"><a name="p26268157"></a><a name="p26268157"></a>CCE集群名称。</p>
</td>
</tr>
<tr id="row35086821"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p23460259"><a name="p23460259"></a><a name="p23460259"></a>nameSpace</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p21232866"><a name="p21232866"></a><a name="p21232866"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p42140618"><a name="p42140618"></a><a name="p42140618"></a>CCE集群命名空间。</p>
</td>
</tr>
<tr id="row43721244"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p51759891"><a name="p51759891"></a><a name="p51759891"></a>podName</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p31801671"><a name="p31801671"></a><a name="p31801671"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p20222939151913"><a name="p20222939151913"></a><a name="p20222939151913"></a>CCE容器实例名称。</p>
</td>
</tr>
<tr id="row2637155491913"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p1663795411911"><a name="p1663795411911"></a><a name="p1663795411911"></a>appName</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p663765441911"><a name="p663765441911"></a><a name="p663765441911"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p10637125431912"><a name="p10637125431912"></a><a name="p10637125431912"></a>服务名称。</p>
</td>
</tr>
<tr id="row1249815952012"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p124983917202"><a name="p124983917202"></a><a name="p124983917202"></a>serviceID</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p9499897203"><a name="p9499897203"></a><a name="p9499897203"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p649979172012"><a name="p649979172012"></a><a name="p649979172012"></a>AOM资源-服务ID。</p>
</td>
</tr>
<tr id="row1646518116214"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p5465141111216"><a name="p5465141111216"></a><a name="p5465141111216"></a>containerName</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p184651711192114"><a name="p184651711192114"></a><a name="p184651711192114"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p8465511162119"><a name="p8465511162119"></a><a name="p8465511162119"></a>CCE容器名称。</p>
</td>
</tr>
<tr id="row113421594213"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p734411593219"><a name="p734411593219"></a><a name="p734411593219"></a>logContent</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p534455915212"><a name="p534455915212"></a><a name="p534455915212"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p034413598212"><a name="p034413598212"></a><a name="p034413598212"></a>日志原数据。</p>
</td>
</tr>
<tr id="row916419122214"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p11815195224"><a name="p11815195224"></a><a name="p11815195224"></a>pathFile</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p16182193226"><a name="p16182193226"></a><a name="p16182193226"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p418171920224"><a name="p418171920224"></a><a name="p418171920224"></a>日志文件绝对路径。</p>
</td>
</tr>
<tr id="row158667496226"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p19866154918222"><a name="p19866154918222"></a><a name="p19866154918222"></a>hostIP</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p1486614499225"><a name="p1486614499225"></a><a name="p1486614499225"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p178661249182220"><a name="p178661249182220"></a><a name="p178661249182220"></a>日志文件所在虚拟机主机IP。</p>
</td>
</tr>
<tr id="row16411317122312"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p134111017172314"><a name="p134111017172314"></a><a name="p134111017172314"></a>hostId</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p2411111762319"><a name="p2411111762319"></a><a name="p2411111762319"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p94111717162318"><a name="p94111717162318"></a><a name="p94111717162318"></a>主机在集群中ID。</p>
</td>
</tr>
<tr id="row1263965792416"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p156391557202416"><a name="p156391557202416"></a><a name="p156391557202416"></a>hostName</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p20639125732412"><a name="p20639125732412"></a><a name="p20639125732412"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p18639457142419"><a name="p18639457142419"></a><a name="p18639457142419"></a>日志文件所在虚拟机名称。</p>
</td>
</tr>
<tr id="row17800192011259"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p28001720152518"><a name="p28001720152518"></a><a name="p28001720152518"></a>collectTime</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p17800182062512"><a name="p17800182062512"></a><a name="p17800182062512"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p138001202253"><a name="p138001202253"></a><a name="p138001202253"></a>日志采集时间，UTC时间，毫秒级。</p>
</td>
</tr>
<tr id="row17446546142511"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p17446154622513"><a name="p17446154622513"></a><a name="p17446154622513"></a>lineNum</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p20446546192511"><a name="p20446546192511"></a><a name="p20446546192511"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p8446114619254"><a name="p8446114619254"></a><a name="p8446114619254"></a>日志单行序列号，值为采集时间* 10000 +（1~10000）。</p>
</td>
</tr>
<tr id="row14784155817263"><td class="cellrowborder" valign="top" width="29.592959295929592%" headers="mcps1.2.4.1.1 "><p id="p2784135811263"><a name="p2784135811263"></a><a name="p2784135811263"></a>logContentSize</p>
</td>
<td class="cellrowborder" valign="top" width="36.733673367336735%" headers="mcps1.2.4.1.2 "><p id="p12784458192619"><a name="p12784458192619"></a><a name="p12784458192619"></a>string</p>
</td>
<td class="cellrowborder" valign="top" width="33.673367336733676%" headers="mcps1.2.4.1.3 "><p id="p97841585265"><a name="p97841585265"></a><a name="p97841585265"></a>单行日志大小。</p>
</td>
</tr>
</tbody>
</table>

**响应示例**

```
{ 
 "errorCode":
 "SVCSTR.ALS.200200",
 "errorMessage":"Query data success",
 "result":"{\"total\":5000,
            \"data\":[{\"category\":\"app\",
            \"loghash\":\"496b2070d40a83c17f2625401af8a50aadc316f216771fbe38b94d31feaa30eb\",
            \"clusterId\":\"c693fa7c-54cd-11e8-8055-0255ac101e40\",
            \"clusterName\":\"aomdemo\",
            \"nameSpace\":\"default\",
            \"podName\":\"als0712-7c4875f884-q5wwp\",
            \"appName\":\"als0712\",
            \"serviceID\":\"\",
            \"containerName\":\"container-0\",
            \"logContent\":\"warn:2018/10/09 06:57:01 helloworld.go:108: the main process is running now.\\n\",
            \"pathFile\":\"/var/paas/sys/log/apm/debug_erro.trace\",
            \"hostIP\":\"192.168.0.133\",
            \"hostId\":\"c11c7211-5a0b-4925-bef4-d078661299b0\",
            \"hostName\":\"192.168.0.133\",
            \"collectTime\":\"1539068233983\",
            \"lineNum\":\"15390682339830002\",
            \"logContentSize\":\"77\"
                      }]
            }"
}
```

## 状态码<a name="section22507142"></a>

-   正常

    状态码如[表5](#table86491459125016)所示。


**表 5**  状态码

<a name="table86491459125016"></a>
<table><thead align="left"><tr id="row58979846"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p12638194"><a name="p12638194"></a><a name="p12638194"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p17060819"><a name="p17060819"></a><a name="p17060819"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row39749137"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p65563539"><a name="p65563539"></a><a name="p65563539"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p9046466"><a name="p9046466"></a><a name="p9046466"></a>正常</p>
</td>
</tr>
</tbody>
</table>

-   异常

    状态码如[表6](#table7649145915013)所示。更多状态码请见[状态码](状态码.md)


**表 6**  状态码

<a name="table7649145915013"></a>
<table><thead align="left"><tr id="row13716216"><th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.1"><p id="p37271751"><a name="p37271751"></a><a name="p37271751"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="50%" id="mcps1.2.3.1.2"><p id="p66221887"><a name="p66221887"></a><a name="p66221887"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row62372615"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p19017031"><a name="p19017031"></a><a name="p19017031"></a>400 Bad Request</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p63984552"><a name="p63984552"></a><a name="p63984552"></a>请求错误。</p>
</td>
</tr>
<tr id="row38990060"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p4078305"><a name="p4078305"></a><a name="p4078305"></a>401 Unauthorized</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p61907274"><a name="p61907274"></a><a name="p61907274"></a>未提供认证信息，或认证信息错。</p>
</td>
</tr>
<tr id="row20294558"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p33246481"><a name="p33246481"></a><a name="p33246481"></a>403 Forbidden</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p8610412"><a name="p8610412"></a><a name="p8610412"></a>请求页面被禁止访问。</p>
</td>
</tr>
<tr id="row10384848"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p35866396"><a name="p35866396"></a><a name="p35866396"></a>500 Internal Server Error</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p19496931"><a name="p19496931"></a><a name="p19496931"></a>请求未完成，服务异常。</p>
</td>
</tr>
<tr id="row41254657"><td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.1 "><p id="p53292943"><a name="p53292943"></a><a name="p53292943"></a>503 Service Unavailable</p>
</td>
<td class="cellrowborder" valign="top" width="50%" headers="mcps1.2.3.1.2 "><p id="p21761101"><a name="p21761101"></a><a name="p21761101"></a>系统暂时不可用，请求受限。</p>
</td>
</tr>
</tbody>
</table>

## 错误码<a name="section1031718191744"></a>

**表 7**  错误码

<a name="table19843152719510"></a>
<table><thead align="left"><tr id="row88441927656"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p1664218538510"><a name="p1664218538510"></a><a name="p1664218538510"></a>错误码</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p146421953155"><a name="p146421953155"></a><a name="p146421953155"></a>错误信息</p>
</th>
<th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p18642145310513"><a name="p18642145310513"></a><a name="p18642145310513"></a>处理措施</p>
</th>
</tr>
</thead>
<tbody><tr id="row68442272514"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p498911258303"><a name="p498911258303"></a><a name="p498911258303"></a>SVCSTR.ALS.200.200</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1935283814317"><a name="p1935283814317"></a><a name="p1935283814317"></a>Query data success.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p13238161362"><a name="p13238161362"></a><a name="p13238161362"></a>-</p>
</td>
</tr>
<tr id="row01291251413"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p512161212147"><a name="p512161212147"></a><a name="p512161212147"></a>SVCSTR.ALS.200.201</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1012710430199"><a name="p1012710430199"></a><a name="p1012710430199"></a>'Specific parameter error message'</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p41211127142"><a name="p41211127142"></a><a name="p41211127142"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
<tr id="row1384414271159"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p369052123211"><a name="p369052123211"></a><a name="p369052123211"></a>SVCSTR.ALS.200.203</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p3757153510321"><a name="p3757153510321"></a><a name="p3757153510321"></a>No query to the log information.</p>
</td>
<td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p02441616618"><a name="p02441616618"></a><a name="p02441616618"></a>请检查对应的参数是否符合要求。</p>
</td>
</tr>
</tbody>
</table>

